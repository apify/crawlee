<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-typedoc-api plugin-id-default api-version-3.1 docs-doc-page" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Changelog | API | Crawlee</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://crawlee.dev/img/crawlee-og.png"><meta data-rh="true" name="twitter:image" content="https://crawlee.dev/img/crawlee-og.png"><meta data-rh="true" property="og:url" content="https://crawlee.dev/api/3.1/core/changelog"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="3.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-3.1"><meta data-rh="true" name="docsearch:version" content="3.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-3.1"><meta data-rh="true" property="og:title" content="Changelog | API | Crawlee"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://crawlee.dev/api/3.1/core/changelog"><link data-rh="true" rel="alternate" href="https://crawlee.dev/api/3.1/core/changelog" hreflang="en"><link data-rh="true" rel="alternate" href="https://crawlee.dev/api/3.1/core/changelog" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://5JC94MPMLY-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Crawlee" href="/opensearch.xml">


<!-- Google Tag Manager -->
    <script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-5P7MCS7",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>
    <!-- End Google Tag Manager -->

<script src="/js/custom.js"></script><link rel="stylesheet" href="/assets/css/styles.2e59cc1b.css">
<script src="/assets/js/runtime~main.62b8ce99.js" defer="defer"></script>
<script src="/assets/js/main.d2a0cb67.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/crawlee-light.svg" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/crawlee-dark.svg" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Crawlee</b></a><a class="navbar__item navbar__link" href="/docs/quick-start">Docs</a><a class="navbar__item navbar__link" href="/docs/examples">Examples</a><a class="navbar__item navbar__link" href="/api/core">API</a><a aria-current="page" class="navbar__item navbar__link changelog navbar__link--active" href="/api/core/changelog">Changelog</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/quick-start">3.7</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/quick-start">Next</a></li><li><a class="dropdown__link" href="/docs/quick-start">3.7</a></li><li><a class="dropdown__link" href="/docs/3.6/quick-start">3.6</a></li><li><a class="dropdown__link" href="/docs/3.5/quick-start">3.5</a></li><li><a class="dropdown__link" href="/docs/3.4/quick-start">3.4</a></li><li><a class="dropdown__link" href="/docs/3.3/quick-start">3.3</a></li><li><a class="dropdown__link" href="/docs/3.2/quick-start">3.2</a></li><li><a class="dropdown__link" href="/docs/3.1/quick-start">3.1</a></li><li><a class="dropdown__link" href="/docs/3.0/quick-start">3.0</a></li><li><a href="https://sdk.apify.com/docs/guides/getting-started" target="_blank" rel="noopener noreferrer" class="dropdown__link">2.2<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://sdk.apify.com/docs/1.3.1/guides/getting-started" target="_blank" rel="noopener noreferrer" class="dropdown__link">1.3<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="toggle_MW0i colorModeToggle_x44X"><button class="clean-btn toggleButton_yw5v toggleButtonDisabled_BJd7" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><span><svg viewBox="0 0 13 12" fill="none" xmlns="http://www.w3.org/2000/svg" width="14" height="14" class="lightToggleIcon_SFTY"><g clip-path="url(#clip0_833_8168)"><path d="M6.59998 8.49999C7.98069 8.49999 9.09998 7.3807 9.09998 5.99999C9.09998 4.61928 7.98069 3.49999 6.59998 3.49999C5.21926 3.49999 4.09998 4.61928 4.09998 5.99999C4.09998 7.3807 5.21926 8.49999 6.59998 8.49999Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M6.59985 0.5V1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M6.59985 10.5V11.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.7099 2.11L3.4199 2.82" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9.77991 9.17999L10.4899 9.88999" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M1.09998 6H2.09998" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M11.0999 6H12.0999" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2.7099 9.88999L3.4199 9.17999" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9.77991 2.82L10.4899 2.11" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0_833_8168"><rect width="12" height="12" fill="white" transform="translate(0.599976)"></rect></clipPath></defs></svg><svg viewBox="0 0 13 12" width="14" height="14" class="darkToggleIcon_ekgs"><path d="M10.7001 6.39501C10.6215 7.24611 10.3021 8.05721 9.77927 8.7334C9.25646 9.40959 8.55189 9.92291 7.748 10.2133C6.9441 10.5036 6.07414 10.5591 5.2399 10.3731C4.40565 10.187 3.64164 9.76728 3.03726 9.1629C2.43287 8.55851 2.01312 7.7945 1.8271 6.96026C1.64108 6.12602 1.6965 5.25605 1.98688 4.45216C2.27725 3.64826 2.79056 2.94369 3.46675 2.42088C4.14294 1.89808 4.95404 1.57866 5.80515 1.50001C5.30685 2.17414 5.06707 3.00473 5.12941 3.84071C5.19175 4.6767 5.55208 5.46254 6.14485 6.05531C6.73762 6.64808 7.52346 7.0084 8.35944 7.07074C9.19542 7.13308 10.026 6.8933 10.7001 6.39501Z" stroke="currentColor" fill="transparent" stroke-linecap="round" stroke-linejoin="round"></path></svg></span></button></div><a href="https://github.com/apify/crawlee" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link icon" title="View on GitHub">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://discord.com/invite/jyEM2PRvMU" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link icon" title="Chat on Discord">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="apiPage"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/crawlee-light.svg" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/crawlee-dark.svg" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b>Crawlee</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/api/3.1/core">@crawlee/core</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/api/3.1/core">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/api/3.1/core/class/AutoscaledPool">Classes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/api/3.1/core/enum/EnqueueStrategy">Enumerations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/api/3.1/core/function/enqueueLinks">Functions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/api/3.1/core/interface/AutoscaledPoolOptions">Interfaces</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/api/3.1/core#EventTypeName">Type Aliases</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/api/3.1/core#log">Variables</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/api/3.1/core/changelog">Changelog</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/api/3.1/cheerio-crawler">@crawlee/cheerio</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/api/3.1/playwright-crawler">@crawlee/playwright</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/api/3.1/puppeteer-crawler">@crawlee/puppeteer</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/api/3.1/jsdom-crawler">@crawlee/jsdom</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/api/3.1/basic-crawler">@crawlee/basic</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/api/3.1/http-crawler">@crawlee/http</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/api/3.1/browser-crawler">@crawlee/browser</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/api/3.1/memory-storage">@crawlee/memory-storage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/api/3.1/browser-pool">@crawlee/browser-pool</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/api/3.1/utils">@crawlee/utils</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/api/3.1/types">@crawlee/types</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col apiItemCol"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for version <b>3.1</b>.<!-- --> <!-- -->For the latest API, see version<!-- --> <b><a href="/api">3.7</a></b>.</div></div><div class="apiItemContainer"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">@crawlee/core</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Changelog</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 3.1</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile apiTocMobile"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Changelog</h1></header><section class="tsd-readme"><p>All notable changes to this project will be documented in this file.
See <a href="https://conventionalcommits.org" target="_blank" rel="noopener noreferrer">Conventional Commits</a> for commit guidelines.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="371-2024-01-02"><a href="https://github.com/apify/crawlee/compare/v3.7.0...v3.7.1" target="_blank" rel="noopener noreferrer">3.7.1</a> (2024-01-02)<a href="#371-2024-01-02" class="hash-link" aria-label="Direct link to 371-2024-01-02" title="Direct link to 371-2024-01-02">​</a></h2>
<p><strong>Note:</strong> Version bump only for package @crawlee/core</p>
<h1><a href="https://github.com/apify/crawlee/compare/v3.6.2...v3.7.0" target="_blank" rel="noopener noreferrer">3.7.0</a> (2023-12-21)</h1>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes">Bug Fixes<a href="#bug-fixes" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li><code>retryOnBlocked</code> doesn&#x27;t override the blocked HTTP codes (<a href="https://github.com/apify/crawlee/issues/2243" target="_blank" rel="noopener noreferrer">#2243</a>) (<a href="https://github.com/apify/crawlee/commit/81672c3d1db1dcdcffb868de5740addff82cf112" target="_blank" rel="noopener noreferrer">81672c3</a>)</li>
<li>filter out empty globs (<a href="https://github.com/apify/crawlee/issues/2205" target="_blank" rel="noopener noreferrer">#2205</a>) (<a href="https://github.com/apify/crawlee/commit/41322ab32d7db7baf61638d00fd7eaec9e5330f1" target="_blank" rel="noopener noreferrer">41322ab</a>), closes <a href="https://github.com/apify/crawlee/issues/2200" target="_blank" rel="noopener noreferrer">#2200</a></li>
<li>make SessionPool queue up getSession calls to prevent overruns (<a href="https://github.com/apify/crawlee/issues/2239" target="_blank" rel="noopener noreferrer">#2239</a>) (<a href="https://github.com/apify/crawlee/commit/0f5665c473371bff5a5d3abee3c3a9d23f2aeb23" target="_blank" rel="noopener noreferrer">0f5665c</a>), closes <a href="https://github.com/apify/crawlee/issues/1667" target="_blank" rel="noopener noreferrer">#1667</a></li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features">Features<a href="#features" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<ul>
<li>allow configuring crawler statistics (<a href="https://github.com/apify/crawlee/issues/2213" target="_blank" rel="noopener noreferrer">#2213</a>) (<a href="https://github.com/apify/crawlee/commit/9fd60e4036dce720c71f2d169a8eccbc4c813a96" target="_blank" rel="noopener noreferrer">9fd60e4</a>), closes <a href="https://github.com/apify/crawlee/issues/1789" target="_blank" rel="noopener noreferrer">#1789</a></li>
<li>check enqueue link strategy post redirect (<a href="https://github.com/apify/crawlee/issues/2238" target="_blank" rel="noopener noreferrer">#2238</a>) (<a href="https://github.com/apify/crawlee/commit/3c5f9d6056158e042e12d75b2b1b21ef6c32e618" target="_blank" rel="noopener noreferrer">3c5f9d6</a>), closes <a href="https://github.com/apify/crawlee/issues/2173" target="_blank" rel="noopener noreferrer">#2173</a></li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="362-2023-11-26"><a href="https://github.com/apify/crawlee/compare/v3.6.1...v3.6.2" target="_blank" rel="noopener noreferrer">3.6.2</a> (2023-11-26)<a href="#362-2023-11-26" class="hash-link" aria-label="Direct link to 362-2023-11-26" title="Direct link to 362-2023-11-26">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-1">Bug Fixes<a href="#bug-fixes-1" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li>prevent race condition in KeyValueStore.getAutoSavedValue() (<a href="https://github.com/apify/crawlee/issues/2193" target="_blank" rel="noopener noreferrer">#2193</a>) (<a href="https://github.com/apify/crawlee/commit/e340e2b8764968d22a22bd67769676b9f2f1a2fb" target="_blank" rel="noopener noreferrer">e340e2b</a>)</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="361-2023-11-15"><a href="https://github.com/apify/crawlee/compare/v3.6.0...v3.6.1" target="_blank" rel="noopener noreferrer">3.6.1</a> (2023-11-15)<a href="#361-2023-11-15" class="hash-link" aria-label="Direct link to 361-2023-11-15" title="Direct link to 361-2023-11-15">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-2">Bug Fixes<a href="#bug-fixes-2" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li><strong>ts:</strong> specify type explicitly for logger (<a href="https://github.com/apify/crawlee/commit/aec355022eb13f2624eeba20aeeb42dc0ad8365c" target="_blank" rel="noopener noreferrer">aec3550</a>)</li>
</ul>
<h1><a href="https://github.com/apify/crawlee/compare/v3.5.8...v3.6.0" target="_blank" rel="noopener noreferrer">3.6.0</a> (2023-11-15)</h1>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-3">Bug Fixes<a href="#bug-fixes-3" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li>add <code>skipNavigation</code> option to <code>enqueueLinks</code> (<a href="https://github.com/apify/crawlee/issues/2153" target="_blank" rel="noopener noreferrer">#2153</a>) (<a href="https://github.com/apify/crawlee/commit/118515d2ba534b99be2f23436f6abe41d66a8e07" target="_blank" rel="noopener noreferrer">118515d</a>)</li>
<li><strong>core:</strong> respect some advanced options for <code>RequestList.open()</code> + improve docs (<a href="https://github.com/apify/crawlee/issues/2158" target="_blank" rel="noopener noreferrer">#2158</a>) (<a href="https://github.com/apify/crawlee/commit/c5a1b07ad62957fbe2cf90938d1f27b1ca54534a" target="_blank" rel="noopener noreferrer">c5a1b07</a>)</li>
<li>declare missing dependency on got-scraping in the core package (<a href="https://github.com/apify/crawlee/commit/cd2fd4d584c3c23ea4f74c9b2f363a55200594c9" target="_blank" rel="noopener noreferrer">cd2fd4d</a>)</li>
<li>retry incorrect Content-Type when response has blocked status code (<a href="https://github.com/apify/crawlee/issues/2176" target="_blank" rel="noopener noreferrer">#2176</a>) (<a href="https://github.com/apify/crawlee/commit/b54fb8bb7bc3575195ee676d21e5feb8f898ef47" target="_blank" rel="noopener noreferrer">b54fb8b</a>), closes <a href="https://github.com/apify/crawlee/issues/1994" target="_blank" rel="noopener noreferrer">#1994</a></li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-1">Features<a href="#features-1" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<ul>
<li><strong>core:</strong> add <code>crawler.exportData()</code> helper (<a href="https://github.com/apify/crawlee/issues/2166" target="_blank" rel="noopener noreferrer">#2166</a>) (<a href="https://github.com/apify/crawlee/commit/c8c09a54a712689969ff1f6bddf70f12a2a22670" target="_blank" rel="noopener noreferrer">c8c09a5</a>)</li>
<li>got-scraping v4 (<a href="https://github.com/apify/crawlee/issues/2110" target="_blank" rel="noopener noreferrer">#2110</a>) (<a href="https://github.com/apify/crawlee/commit/2f05ed22b203f688095300400bb0e6d03a03283c" target="_blank" rel="noopener noreferrer">2f05ed2</a>)</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="358-2023-10-17"><a href="https://github.com/apify/crawlee/compare/v3.5.7...v3.5.8" target="_blank" rel="noopener noreferrer">3.5.8</a> (2023-10-17)<a href="#358-2023-10-17" class="hash-link" aria-label="Direct link to 358-2023-10-17" title="Direct link to 358-2023-10-17">​</a></h2>
<p><strong>Note:</strong> Version bump only for package @crawlee/core</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="357-2023-10-05"><a href="https://github.com/apify/crawlee/compare/v3.5.6...v3.5.7" target="_blank" rel="noopener noreferrer">3.5.7</a> (2023-10-05)<a href="#357-2023-10-05" class="hash-link" aria-label="Direct link to 357-2023-10-05" title="Direct link to 357-2023-10-05">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-4">Bug Fixes<a href="#bug-fixes-4" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li>RQ request count is consistent after migration (<a href="https://github.com/apify/crawlee/issues/2116" target="_blank" rel="noopener noreferrer">#2116</a>) (<a href="https://github.com/apify/crawlee/commit/9ab8c1874f52acc3f0337fdabd36321d0fb40b86" target="_blank" rel="noopener noreferrer">9ab8c18</a>), closes <a href="https://github.com/apify/crawlee/issues/1855" target="_blank" rel="noopener noreferrer">#1855</a> <a href="https://github.com/apify/crawlee/issues/1855" target="_blank" rel="noopener noreferrer">#1855</a></li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="356-2023-10-04"><a href="https://github.com/apify/crawlee/compare/v3.5.5...v3.5.6" target="_blank" rel="noopener noreferrer">3.5.6</a> (2023-10-04)<a href="#356-2023-10-04" class="hash-link" aria-label="Direct link to 356-2023-10-04" title="Direct link to 356-2023-10-04">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-5">Bug Fixes<a href="#bug-fixes-5" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li><strong>types:</strong> re-export RequestQueueOptions as an alias to RequestProviderOptions (<a href="https://github.com/apify/crawlee/issues/2109" target="_blank" rel="noopener noreferrer">#2109</a>) (<a href="https://github.com/apify/crawlee/commit/0900f76742475c19a777733462e38c5a3a9b86b7" target="_blank" rel="noopener noreferrer">0900f76</a>)</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="355-2023-10-02"><a href="https://github.com/apify/crawlee/compare/v3.5.4...v3.5.5" target="_blank" rel="noopener noreferrer">3.5.5</a> (2023-10-02)<a href="#355-2023-10-02" class="hash-link" aria-label="Direct link to 355-2023-10-02" title="Direct link to 355-2023-10-02">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-6">Bug Fixes<a href="#bug-fixes-6" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li>session pool leaks memory on multiple crawler runs (<a href="https://github.com/apify/crawlee/issues/2083" target="_blank" rel="noopener noreferrer">#2083</a>) (<a href="https://github.com/apify/crawlee/commit/b96582a200e25ec11124da1f7f84a2b16b64d133" target="_blank" rel="noopener noreferrer">b96582a</a>), closes <a href="https://github.com/apify/crawlee/issues/2074" target="_blank" rel="noopener noreferrer">#2074</a> <a href="https://github.com/apify/crawlee/issues/2031" target="_blank" rel="noopener noreferrer">#2031</a></li>
<li><strong>types:</strong> make return type of RequestProvider.open and RequestQueue(v2).open strict and accurate (<a href="https://github.com/apify/crawlee/issues/2096" target="_blank" rel="noopener noreferrer">#2096</a>) (<a href="https://github.com/apify/crawlee/commit/dfaddb920d9772985e0b54e0ce029cc7d99b1efa" target="_blank" rel="noopener noreferrer">dfaddb9</a>)</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-2">Features<a href="#features-2" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<ul>
<li>Request Queue v2 (<a href="https://github.com/apify/crawlee/issues/1975" target="_blank" rel="noopener noreferrer">#1975</a>) (<a href="https://github.com/apify/crawlee/commit/70a77ee15f984e9ae67cd584fc58ace7e55346db" target="_blank" rel="noopener noreferrer">70a77ee</a>), closes <a href="https://github.com/apify/crawlee/issues/1365" target="_blank" rel="noopener noreferrer">#1365</a></li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="354-2023-09-11"><a href="https://github.com/apify/crawlee/compare/v3.5.3...v3.5.4" target="_blank" rel="noopener noreferrer">3.5.4</a> (2023-09-11)<a href="#354-2023-09-11" class="hash-link" aria-label="Direct link to 354-2023-09-11" title="Direct link to 354-2023-09-11">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-7">Bug Fixes<a href="#bug-fixes-7" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li><strong>core:</strong> allow explicit calls to <code>purgeDefaultStorage</code> to wipe the storage on each call (<a href="https://github.com/apify/crawlee/issues/2060" target="_blank" rel="noopener noreferrer">#2060</a>) (<a href="https://github.com/apify/crawlee/commit/4831f073e5639fdfb058588bc23c4b673be70929" target="_blank" rel="noopener noreferrer">4831f07</a>)</li>
<li>various helpers opening KVS now respect Configuration (<a href="https://github.com/apify/crawlee/issues/2071" target="_blank" rel="noopener noreferrer">#2071</a>) (<a href="https://github.com/apify/crawlee/commit/59dbb164699774e5a6718e98d0a4e8f630f35323" target="_blank" rel="noopener noreferrer">59dbb16</a>)</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="353-2023-08-31"><a href="https://github.com/apify/crawlee/compare/v3.5.2...v3.5.3" target="_blank" rel="noopener noreferrer">3.5.3</a> (2023-08-31)<a href="#353-2023-08-31" class="hash-link" aria-label="Direct link to 353-2023-08-31" title="Direct link to 353-2023-08-31">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-8">Bug Fixes<a href="#bug-fixes-8" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li><strong>browser-pool:</strong> improve error handling when browser is not found (<a href="https://github.com/apify/crawlee/issues/2050" target="_blank" rel="noopener noreferrer">#2050</a>) (<a href="https://github.com/apify/crawlee/commit/282527f31bb366a4e52463212f652dcf6679b6c3" target="_blank" rel="noopener noreferrer">282527f</a>), closes <a href="https://github.com/apify/crawlee/issues/1459" target="_blank" rel="noopener noreferrer">#1459</a></li>
<li>crawler instances with different StorageClients do not affect each other (<a href="https://github.com/apify/crawlee/issues/2056" target="_blank" rel="noopener noreferrer">#2056</a>) (<a href="https://github.com/apify/crawlee/commit/3f4c86352bdbad1c6a8dd10a2c49a1889ca206fa" target="_blank" rel="noopener noreferrer">3f4c863</a>)</li>
<li>pin all internal dependencies (<a href="https://github.com/apify/crawlee/issues/2041" target="_blank" rel="noopener noreferrer">#2041</a>) (<a href="https://github.com/apify/crawlee/commit/d6f2b172d4a6776137c7893ca798d5b4a9408e79" target="_blank" rel="noopener noreferrer">d6f2b17</a>), closes <a href="https://github.com/apify/crawlee/issues/2040" target="_blank" rel="noopener noreferrer">#2040</a></li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-3">Features<a href="#features-3" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<ul>
<li><strong>core:</strong> add default dataset helpers to <code>BasicCrawler</code> (<a href="https://github.com/apify/crawlee/issues/2057" target="_blank" rel="noopener noreferrer">#2057</a>) (<a href="https://github.com/apify/crawlee/commit/e2a7544ddf775db023ca25553d21cb73484fcd8c" target="_blank" rel="noopener noreferrer">e2a7544</a>)</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="352-2023-08-21"><a href="https://github.com/apify/crawlee/compare/v3.5.1...v3.5.2" target="_blank" rel="noopener noreferrer">3.5.2</a> (2023-08-21)<a href="#352-2023-08-21" class="hash-link" aria-label="Direct link to 352-2023-08-21" title="Direct link to 352-2023-08-21">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-9">Bug Fixes<a href="#bug-fixes-9" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li>make the <code>Request</code> constructor options typesafe (<a href="https://github.com/apify/crawlee/issues/2034" target="_blank" rel="noopener noreferrer">#2034</a>) (<a href="https://github.com/apify/crawlee/commit/75e7d6554a1875e80e5c54f3877bb6e3daf6cdd7" target="_blank" rel="noopener noreferrer">75e7d65</a>)</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="351-2023-08-16"><a href="https://github.com/apify/crawlee/compare/v3.5.0...v3.5.1" target="_blank" rel="noopener noreferrer">3.5.1</a> (2023-08-16)<a href="#351-2023-08-16" class="hash-link" aria-label="Direct link to 351-2023-08-16" title="Direct link to 351-2023-08-16">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-10">Bug Fixes<a href="#bug-fixes-10" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li>add <code>Request.maxRetries</code> to the <code>RequestOptions</code> interface (<a href="https://github.com/apify/crawlee/issues/2024" target="_blank" rel="noopener noreferrer">#2024</a>) (<a href="https://github.com/apify/crawlee/commit/6433821a59538b1f1cb4f29addd83a259ddda74f" target="_blank" rel="noopener noreferrer">6433821</a>)</li>
<li>log original error message on session rotation (<a href="https://github.com/apify/crawlee/issues/2022" target="_blank" rel="noopener noreferrer">#2022</a>) (<a href="https://github.com/apify/crawlee/commit/8a11ffbdaef6b2fe8603aac570c3038f84c2f203" target="_blank" rel="noopener noreferrer">8a11ffb</a>)</li>
</ul>
<h1><a href="https://github.com/apify/crawlee/compare/v3.4.2...v3.5.0" target="_blank" rel="noopener noreferrer">3.5.0</a> (2023-07-31)</h1>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-11">Bug Fixes<a href="#bug-fixes-11" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li><strong>core:</strong> add requests from URL list (<code>requestsFromUrl</code>) to the queue in batches (<a href="https://github.com/apify/crawlee/commit/418fbf89d8680f8c460e37cfbf3e521f45770eb2" target="_blank" rel="noopener noreferrer">418fbf8</a>), closes <a href="https://github.com/apify/crawlee/issues/1995" target="_blank" rel="noopener noreferrer">#1995</a></li>
<li><strong>core:</strong> support relative links in <code>enqueueLinks</code> explicitly provided via <code>urls</code> option (<a href="https://github.com/apify/crawlee/issues/2014" target="_blank" rel="noopener noreferrer">#2014</a>) (<a href="https://github.com/apify/crawlee/commit/cbd9d08065694b8c86e32c773875cecd41e5fcc9" target="_blank" rel="noopener noreferrer">cbd9d08</a>), closes <a href="https://github.com/apify/crawlee/issues/2005" target="_blank" rel="noopener noreferrer">#2005</a></li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-4">Features<a href="#features-4" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<ul>
<li><strong>core:</strong> use <code>RequestQueue.addBatchedRequests()</code> in <code>enqueueLinks</code> helper (<a href="https://github.com/apify/crawlee/commit/4d61ca934072f8bbb680c842d8b1c9a4452ee73a" target="_blank" rel="noopener noreferrer">4d61ca9</a>), closes <a href="https://github.com/apify/crawlee/issues/1995" target="_blank" rel="noopener noreferrer">#1995</a></li>
<li>retire session on proxy error (<a href="https://github.com/apify/crawlee/issues/2002" target="_blank" rel="noopener noreferrer">#2002</a>) (<a href="https://github.com/apify/crawlee/commit/8c0928b24ceabefc454f8114ac30a27023709010" target="_blank" rel="noopener noreferrer">8c0928b</a>), closes <a href="https://github.com/apify/crawlee/issues/1912" target="_blank" rel="noopener noreferrer">#1912</a></li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="342-2023-07-19"><a href="https://github.com/apify/crawlee/compare/v3.4.1...v3.4.2" target="_blank" rel="noopener noreferrer">3.4.2</a> (2023-07-19)<a href="#342-2023-07-19" class="hash-link" aria-label="Direct link to 342-2023-07-19" title="Direct link to 342-2023-07-19">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-5">Features<a href="#features-5" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<ul>
<li><strong>core:</strong> add <code>RequestQueue.addRequestsBatched()</code> that is non-blocking (<a href="https://github.com/apify/crawlee/issues/1996" target="_blank" rel="noopener noreferrer">#1996</a>) (<a href="https://github.com/apify/crawlee/commit/c85485d6ca2bb61cfebb24a2ad99e0b3ba5c069b" target="_blank" rel="noopener noreferrer">c85485d</a>), closes <a href="https://github.com/apify/crawlee/issues/1995" target="_blank" rel="noopener noreferrer">#1995</a></li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="341-2023-07-13"><a href="https://github.com/apify/crawlee/compare/v3.4.0...v3.4.1" target="_blank" rel="noopener noreferrer">3.4.1</a> (2023-07-13)<a href="#341-2023-07-13" class="hash-link" aria-label="Direct link to 341-2023-07-13" title="Direct link to 341-2023-07-13">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-12">Bug Fixes<a href="#bug-fixes-12" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li><strong>http-crawler:</strong> replace <code>IncomingMessage</code> with <code>PlainResponse</code> for context&#x27;s <code>response</code> (<a href="https://github.com/apify/crawlee/issues/1973" target="_blank" rel="noopener noreferrer">#1973</a>) (<a href="https://github.com/apify/crawlee/commit/2a1cc7f4f87f0b1c657759076a236a8f8d9b76ba" target="_blank" rel="noopener noreferrer">2a1cc7f</a>), closes <a href="https://github.com/apify/crawlee/issues/1964" target="_blank" rel="noopener noreferrer">#1964</a></li>
</ul>
<h1><a href="https://github.com/apify/crawlee/compare/v3.3.3...v3.4.0" target="_blank" rel="noopener noreferrer">3.4.0</a> (2023-06-12)</h1>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-6">Features<a href="#features-6" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<ul>
<li>add LinkeDOMCrawler (<a href="https://github.com/apify/crawlee/issues/1907" target="_blank" rel="noopener noreferrer">#1907</a>) (<a href="https://github.com/apify/crawlee/commit/1c69560fe7ef45097e6be1037b79a84eb9a06337" target="_blank" rel="noopener noreferrer">1c69560</a>), closes <a href="https://github.com//github.com/apify/crawlee/pull/1890/issues/issuecomment-1533271694" target="_blank" rel="noopener noreferrer">/github.com/apify/crawlee/pull/1890#issuecomment-1533271694</a></li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="333-2023-05-31"><a href="https://github.com/apify/crawlee/compare/v3.3.2...v3.3.3" target="_blank" rel="noopener noreferrer">3.3.3</a> (2023-05-31)<a href="#333-2023-05-31" class="hash-link" aria-label="Direct link to 333-2023-05-31" title="Direct link to 333-2023-05-31">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-7">Features<a href="#features-7" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<ul>
<li>add support for <code>requestsFromUrl</code> to <code>RequestQueue</code> (<a href="https://github.com/apify/crawlee/issues/1917" target="_blank" rel="noopener noreferrer">#1917</a>) (<a href="https://github.com/apify/crawlee/commit/7f2557cdbbdee177db7c5970ae5a4881b7bc9b35" target="_blank" rel="noopener noreferrer">7f2557c</a>)</li>
<li><strong>core:</strong> add <code>Request.maxRetries</code> to allow overriding the <code>maxRequestRetries</code> (<a href="https://github.com/apify/crawlee/issues/1925" target="_blank" rel="noopener noreferrer">#1925</a>) (<a href="https://github.com/apify/crawlee/commit/c5592db0f8094de27c46ad993bea2c1ab1f61385" target="_blank" rel="noopener noreferrer">c5592db</a>)</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="332-2023-05-11"><a href="https://github.com/apify/crawlee/compare/v3.3.1...v3.3.2" target="_blank" rel="noopener noreferrer">3.3.2</a> (2023-05-11)<a href="#332-2023-05-11" class="hash-link" aria-label="Direct link to 332-2023-05-11" title="Direct link to 332-2023-05-11">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-13">Bug Fixes<a href="#bug-fixes-13" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li>respect config object when creating <code>SessionPool</code> (<a href="https://github.com/apify/crawlee/issues/1881" target="_blank" rel="noopener noreferrer">#1881</a>) (<a href="https://github.com/apify/crawlee/commit/db069df80bc183c6b861c9ac82f1e278e57ea92b" target="_blank" rel="noopener noreferrer">db069df</a>)</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-8">Features<a href="#features-8" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<ul>
<li>allow running single crawler instance multiple times (<a href="https://github.com/apify/crawlee/issues/1844" target="_blank" rel="noopener noreferrer">#1844</a>) (<a href="https://github.com/apify/crawlee/commit/9e6eb1e32f582a8837311aac12cc1d657432f3fa" target="_blank" rel="noopener noreferrer">9e6eb1e</a>), closes <a href="https://github.com/apify/crawlee/issues/765" target="_blank" rel="noopener noreferrer">#765</a></li>
<li><strong>router:</strong> allow inline router definition (<a href="https://github.com/apify/crawlee/issues/1877" target="_blank" rel="noopener noreferrer">#1877</a>) (<a href="https://github.com/apify/crawlee/commit/2d241c9f88964ebd41a181069c378b6b7b5bf262" target="_blank" rel="noopener noreferrer">2d241c9</a>)</li>
<li>support alternate storage clients when opening storages (<a href="https://github.com/apify/crawlee/issues/1901" target="_blank" rel="noopener noreferrer">#1901</a>) (<a href="https://github.com/apify/crawlee/commit/661e550dcf3609b75e2d7bc225c2f6914f45c93e" target="_blank" rel="noopener noreferrer">661e550</a>)</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="331-2023-04-11"><a href="https://github.com/apify/crawlee/compare/v3.3.0...v3.3.1" target="_blank" rel="noopener noreferrer">3.3.1</a> (2023-04-11)<a href="#331-2023-04-11" class="hash-link" aria-label="Direct link to 331-2023-04-11" title="Direct link to 331-2023-04-11">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-14">Bug Fixes<a href="#bug-fixes-14" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li><strong>Storage:</strong> queue up opening storages to prevent issues in concurrent calls (<a href="https://github.com/apify/crawlee/issues/1865" target="_blank" rel="noopener noreferrer">#1865</a>) (<a href="https://github.com/apify/crawlee/commit/044c740101dd0acd2248dee3702aec769ce0c892" target="_blank" rel="noopener noreferrer">044c740</a>)</li>
<li>try to detect stuck request queue and fix its state (<a href="https://github.com/apify/crawlee/issues/1837" target="_blank" rel="noopener noreferrer">#1837</a>) (<a href="https://github.com/apify/crawlee/commit/95a9f941836c020a3223fd309f11cff58bc50624" target="_blank" rel="noopener noreferrer">95a9f94</a>)</li>
</ul>
<h1><a href="https://github.com/apify/crawlee/compare/v3.2.2...v3.3.0" target="_blank" rel="noopener noreferrer">3.3.0</a> (2023-03-09)</h1>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-15">Bug Fixes<a href="#bug-fixes-15" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li>ignore invalid URLs in <code>enqueueLinks</code> in browser crawlers (<a href="https://github.com/apify/crawlee/issues/1803" target="_blank" rel="noopener noreferrer">#1803</a>) (<a href="https://github.com/apify/crawlee/commit/5ac336c5b83b212fd6281659b8ceee091e259ff1" target="_blank" rel="noopener noreferrer">5ac336c</a>)</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-9">Features<a href="#features-9" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<ul>
<li><strong>core:</strong> add <code>exclude</code> option to <code>enqueueLinks</code> (<a href="https://github.com/apify/crawlee/issues/1786" target="_blank" rel="noopener noreferrer">#1786</a>) (<a href="https://github.com/apify/crawlee/commit/2e833dc4b0b82bb6741aa683f3fcba05244427df" target="_blank" rel="noopener noreferrer">2e833dc</a>), closes <a href="https://github.com/apify/crawlee/issues/1785" target="_blank" rel="noopener noreferrer">#1785</a></li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="322-2023-02-08"><a href="https://github.com/apify/crawlee/compare/v3.2.1...v3.2.2" target="_blank" rel="noopener noreferrer">3.2.2</a> (2023-02-08)<a href="#322-2023-02-08" class="hash-link" aria-label="Direct link to 322-2023-02-08" title="Direct link to 322-2023-02-08">​</a></h2>
<p><strong>Note:</strong> Version bump only for package @crawlee/core</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="321-2023-02-07"><a href="https://github.com/apify/crawlee/compare/v3.2.0...v3.2.1" target="_blank" rel="noopener noreferrer">3.2.1</a> (2023-02-07)<a href="#321-2023-02-07" class="hash-link" aria-label="Direct link to 321-2023-02-07" title="Direct link to 321-2023-02-07">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-16">Bug Fixes<a href="#bug-fixes-16" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li>add <code>QueueOperationInfo</code> export to the core package (<a href="https://github.com/apify/crawlee/commit/5ec6c24ba31c11c0ff4db49a6461f112a70071b3" target="_blank" rel="noopener noreferrer">5ec6c24</a>)</li>
</ul>
<h1><a href="https://github.com/apify/crawlee/compare/v3.1.4...v3.2.0" target="_blank" rel="noopener noreferrer">3.2.0</a> (2023-02-07)</h1>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-17">Bug Fixes<a href="#bug-fixes-17" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li>clone <code>request.userData</code> when creating new request object (<a href="https://github.com/apify/crawlee/issues/1728" target="_blank" rel="noopener noreferrer">#1728</a>) (<a href="https://github.com/apify/crawlee/commit/222ef59b646740ae46be011ea0bc3d11c51a553e" target="_blank" rel="noopener noreferrer">222ef59</a>), closes <a href="https://github.com/apify/crawlee/issues/1725" target="_blank" rel="noopener noreferrer">#1725</a></li>
<li>declare missing dependency on <code>tslib</code> (<a href="https://github.com/apify/crawlee/commit/27e96c80c26e7fc31809a4b518d699573cb8c662" target="_blank" rel="noopener noreferrer">27e96c8</a>), closes <a href="https://github.com/apify/crawlee/issues/1747" target="_blank" rel="noopener noreferrer">#1747</a></li>
<li>ensure CrawlingContext interface is inferred correctly in route handlers (<a href="https://github.com/apify/crawlee/commit/aa84633b1a2007c2e91bf012e944433b21243f2e" target="_blank" rel="noopener noreferrer">aa84633</a>)</li>
<li><strong>utils:</strong> add missing dependency on <code>ow</code> (<a href="https://github.com/apify/crawlee/commit/bf0e03cc6ddc103c9337de5cd8dce9bc86c369a3" target="_blank" rel="noopener noreferrer">bf0e03c</a>), closes <a href="https://github.com/apify/crawlee/issues/1716" target="_blank" rel="noopener noreferrer">#1716</a></li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-10">Features<a href="#features-10" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<ul>
<li><strong>enqueueLinks:</strong> add SameOrigin strategy and relax protocol matching for the other strategies (<a href="https://github.com/apify/crawlee/issues/1748" target="_blank" rel="noopener noreferrer">#1748</a>) (<a href="https://github.com/apify/crawlee/commit/4ba982a909a3c16004b24ef90c3da3ee4e075be0" target="_blank" rel="noopener noreferrer">4ba982a</a>)</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="313-2022-12-07"><a href="https://github.com/apify/crawlee/compare/v3.1.2...v3.1.3" target="_blank" rel="noopener noreferrer">3.1.3</a> (2022-12-07)<a href="#313-2022-12-07" class="hash-link" aria-label="Direct link to 313-2022-12-07" title="Direct link to 313-2022-12-07">​</a></h2>
<p><strong>Note:</strong> Version bump only for package @crawlee/core</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="312-2022-11-15"><a href="https://github.com/apify/crawlee/compare/v3.1.1...v3.1.2" target="_blank" rel="noopener noreferrer">3.1.2</a> (2022-11-15)<a href="#312-2022-11-15" class="hash-link" aria-label="Direct link to 312-2022-11-15" title="Direct link to 312-2022-11-15">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-18">Bug Fixes<a href="#bug-fixes-18" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li>injectJQuery in context does not survive navs (<a href="https://github.com/apify/crawlee/issues/1661" target="_blank" rel="noopener noreferrer">#1661</a>) (<a href="https://github.com/apify/crawlee/commit/493a7cff569cb12cfd9aa5e0f4fcb9de686eb41f" target="_blank" rel="noopener noreferrer">493a7cf</a>)</li>
<li>make router error message more helpful for undefined routes (<a href="https://github.com/apify/crawlee/issues/1678" target="_blank" rel="noopener noreferrer">#1678</a>) (<a href="https://github.com/apify/crawlee/commit/ab359d84f2ebdac69441ae84dcade1bca7714390" target="_blank" rel="noopener noreferrer">ab359d8</a>)</li>
<li><strong>MemoryStorage:</strong> correctly respect the desc option (<a href="https://github.com/apify/crawlee/issues/1666" target="_blank" rel="noopener noreferrer">#1666</a>) (<a href="https://github.com/apify/crawlee/commit/b5f37f66a50b2d546eca24a699cf92cb683b7026" target="_blank" rel="noopener noreferrer">b5f37f6</a>)</li>
<li>requestHandlerTimeout timing (<a href="https://github.com/apify/crawlee/issues/1660" target="_blank" rel="noopener noreferrer">#1660</a>) (<a href="https://github.com/apify/crawlee/commit/493ea0ce80e55ece5a8881a6aea6674918873b35" target="_blank" rel="noopener noreferrer">493ea0c</a>)</li>
<li>shallow clone browserPoolOptions before normalization (<a href="https://github.com/apify/crawlee/issues/1665" target="_blank" rel="noopener noreferrer">#1665</a>) (<a href="https://github.com/apify/crawlee/commit/22467ca81ad9464d528495333f62a60f2ea0487c" target="_blank" rel="noopener noreferrer">22467ca</a>)</li>
<li>support headfull mode in playwright js project template (<a href="https://github.com/apify/crawlee/commit/ea2e61bc3bfcc9a895a89ad6db415a398bd3b7db" target="_blank" rel="noopener noreferrer">ea2e61b</a>)</li>
<li>support headfull mode in puppeteer js project template (<a href="https://github.com/apify/crawlee/commit/e6aceb81ed0762f25dde66ff94ccdf8c1a619f7d" target="_blank" rel="noopener noreferrer">e6aceb8</a>)</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-11">Features<a href="#features-11" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<ul>
<li><strong>jsdom-crawler:</strong> add runScripts option (<a href="https://github.com/apify/crawlee/issues/1668" target="_blank" rel="noopener noreferrer">#1668</a>) (<a href="https://github.com/apify/crawlee/commit/8ef90bc1c020ddee334dd9a9267f6b6298a27024" target="_blank" rel="noopener noreferrer">8ef90bc</a>)</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="311-2022-11-07"><a href="https://github.com/apify/crawlee/compare/v3.1.0...v3.1.1" target="_blank" rel="noopener noreferrer">3.1.1</a> (2022-11-07)<a href="#311-2022-11-07" class="hash-link" aria-label="Direct link to 311-2022-11-07" title="Direct link to 311-2022-11-07">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-19">Bug Fixes<a href="#bug-fixes-19" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li><code>utils.playwright.blockRequests</code> warning message (<a href="https://github.com/apify/crawlee/issues/1632" target="_blank" rel="noopener noreferrer">#1632</a>) (<a href="https://github.com/apify/crawlee/commit/76549eb250a39e961b7f567ad0610af136d1c79f" target="_blank" rel="noopener noreferrer">76549eb</a>)</li>
<li>concurrency option override order (<a href="https://github.com/apify/crawlee/issues/1649" target="_blank" rel="noopener noreferrer">#1649</a>) (<a href="https://github.com/apify/crawlee/commit/7bbad0380cd6de3fdca79ba57e1fef1d22bd56f8" target="_blank" rel="noopener noreferrer">7bbad03</a>)</li>
<li>handle non-error objects thrown gracefully (<a href="https://github.com/apify/crawlee/issues/1652" target="_blank" rel="noopener noreferrer">#1652</a>) (<a href="https://github.com/apify/crawlee/commit/c3a4e1a9b7d0b80a8e889bdcb394fc0be3905c6f" target="_blank" rel="noopener noreferrer">c3a4e1a</a>)</li>
<li>mark session as bad on failed requests (<a href="https://github.com/apify/crawlee/issues/1647" target="_blank" rel="noopener noreferrer">#1647</a>) (<a href="https://github.com/apify/crawlee/commit/445ae4321816bc418a83c02fb52e64df96bfb0a9" target="_blank" rel="noopener noreferrer">445ae43</a>)</li>
<li>support reloading of sessions with lots of retries (<a href="https://github.com/apify/crawlee/commit/ebc89d2d69d5a2da6eb4e37de59ea39daf81f8f8" target="_blank" rel="noopener noreferrer">ebc89d2</a>)</li>
<li>fix type errors when <code>playwright</code> is not installed (<a href="https://github.com/apify/crawlee/issues/1637" target="_blank" rel="noopener noreferrer">#1637</a>) (<a href="https://github.com/apify/crawlee/commit/de9db0c2b24019d2e1dd43206dd7f149ecdc679a" target="_blank" rel="noopener noreferrer">de9db0c</a>)</li>
<li>upgrade to <a href="mailto:puppeteer@19.x" target="_blank" rel="noopener noreferrer">puppeteer@19.x</a> (<a href="https://github.com/apify/crawlee/issues/1623" target="_blank" rel="noopener noreferrer">#1623</a>) (<a href="https://github.com/apify/crawlee/commit/ce36d6bd60c7adb113759126b3cb15ca222e94d0" target="_blank" rel="noopener noreferrer">ce36d6b</a>)</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-12">Features<a href="#features-12" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<ul>
<li>add static <code>set</code> and <code>useStorageClient</code> shortcuts to <code>Configuration</code> (<a href="https://github.com/apify/crawlee/commit/2e66fa2fad84aee2dca08b386916b465a0c012a3" target="_blank" rel="noopener noreferrer">2e66fa2</a>)</li>
<li>enable migration testing (<a href="https://github.com/apify/crawlee/issues/1583" target="_blank" rel="noopener noreferrer">#1583</a>) (<a href="https://github.com/apify/crawlee/commit/ee3a68fff1fcdf941c9a1d3734107635e9a12049" target="_blank" rel="noopener noreferrer">ee3a68f</a>)</li>
<li><strong>playwright:</strong> disable animations when taking screenshots (<a href="https://github.com/apify/crawlee/issues/1601" target="_blank" rel="noopener noreferrer">#1601</a>) (<a href="https://github.com/apify/crawlee/commit/4e63034c7b87de405edbd84f9b1803aa101f5c78" target="_blank" rel="noopener noreferrer">4e63034</a>)</li>
</ul>
<h1><a href="https://github.com/apify/crawlee/compare/v3.0.4...v3.1.0" target="_blank" rel="noopener noreferrer">3.1.0</a> (2022-10-13)</h1>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-20">Bug Fixes<a href="#bug-fixes-20" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li>add overload for <code>KeyValueStore.getValue</code> with defaultValue (<a href="https://github.com/apify/crawlee/issues/1541" target="_blank" rel="noopener noreferrer">#1541</a>) (<a href="https://github.com/apify/crawlee/commit/e3cb509cb433e72e058b08a323dc7564e858f547" target="_blank" rel="noopener noreferrer">e3cb509</a>)</li>
<li>add retry attempts to methods in CLI (<a href="https://github.com/apify/crawlee/issues/1588" target="_blank" rel="noopener noreferrer">#1588</a>) (<a href="https://github.com/apify/crawlee/commit/9142e598de68cc86d82825823c87b82a52c7b305" target="_blank" rel="noopener noreferrer">9142e59</a>)</li>
<li>allow <code>label</code> in <code>enqueueLinksByClickingElements</code> options (<a href="https://github.com/apify/crawlee/issues/1525" target="_blank" rel="noopener noreferrer">#1525</a>) (<a href="https://github.com/apify/crawlee/commit/18b7c25592eaaa4a9f97cacc6e7154528ce54bf6" target="_blank" rel="noopener noreferrer">18b7c25</a>)</li>
<li><strong>basic-crawler:</strong> handle <code>request.noRetry</code> after <code>errorHandler</code> (<a href="https://github.com/apify/crawlee/issues/1542" target="_blank" rel="noopener noreferrer">#1542</a>) (<a href="https://github.com/apify/crawlee/commit/2a2040e13209aff5e64ee47194940182b686b3a7" target="_blank" rel="noopener noreferrer">2a2040e</a>)</li>
<li>build storage classes by using <code>this</code> instead of the class (<a href="https://github.com/apify/crawlee/issues/1596" target="_blank" rel="noopener noreferrer">#1596</a>) (<a href="https://github.com/apify/crawlee/commit/2b14eb7240d10760518e047095766084a3d255e3" target="_blank" rel="noopener noreferrer">2b14eb7</a>)</li>
<li>correct some typing exports (<a href="https://github.com/apify/crawlee/issues/1527" target="_blank" rel="noopener noreferrer">#1527</a>) (<a href="https://github.com/apify/crawlee/commit/4a136e59e128f0a80ad4a1b98b87449647f23f43" target="_blank" rel="noopener noreferrer">4a136e5</a>)</li>
<li>do not hide stack trace of (retried) Type/Syntax/ReferenceErrors (<a href="https://github.com/apify/crawlee/commit/469b4b58f1c19699d05da84f5f09a95d682421f0" target="_blank" rel="noopener noreferrer">469b4b5</a>)</li>
<li><strong>enqueueLinks:</strong> ensure the enqueue strategy is respected alongside user patterns (<a href="https://github.com/apify/crawlee/issues/1509" target="_blank" rel="noopener noreferrer">#1509</a>) (<a href="https://github.com/apify/crawlee/commit/2b0eeed3c5b0a69265f7d0567028e5707af4835b" target="_blank" rel="noopener noreferrer">2b0eeed</a>)</li>
<li><strong>enqueueLinks:</strong> prevent useless request creations when filtering by user patterns (<a href="https://github.com/apify/crawlee/issues/1510" target="_blank" rel="noopener noreferrer">#1510</a>) (<a href="https://github.com/apify/crawlee/commit/cb8fe3664db1bd4cba9c2b2185e96bceddabb333" target="_blank" rel="noopener noreferrer">cb8fe36</a>)</li>
<li>export <code>Cookie</code> from <code>crawlee</code> metapackage (<a href="https://github.com/apify/crawlee/commit/7b02cebc6920da9bd36d63802df0f7d6abec3887" target="_blank" rel="noopener noreferrer">7b02ceb</a>)</li>
<li>handle redirect cookies (<a href="https://github.com/apify/crawlee/issues/1521" target="_blank" rel="noopener noreferrer">#1521</a>) (<a href="https://github.com/apify/crawlee/commit/2f7fc7cc1d27553d94a915667f0e6d2af599a80c" target="_blank" rel="noopener noreferrer">2f7fc7c</a>)</li>
<li><strong>http-crawler:</strong> do not hang on POST without payload (<a href="https://github.com/apify/crawlee/issues/1546" target="_blank" rel="noopener noreferrer">#1546</a>) (<a href="https://github.com/apify/crawlee/commit/8c87390e0db1924f463019cc55dfc265b12db2a9" target="_blank" rel="noopener noreferrer">8c87390</a>)</li>
<li>remove undeclared dependency on core package from puppeteer utils (<a href="https://github.com/apify/crawlee/commit/827ae60d6c77e8c7271408493c3750a67ef8a9b4" target="_blank" rel="noopener noreferrer">827ae60</a>)</li>
<li>support TypeScript 4.8 (<a href="https://github.com/apify/crawlee/issues/1507" target="_blank" rel="noopener noreferrer">#1507</a>) (<a href="https://github.com/apify/crawlee/commit/4c3a5045931a7f270bf8eda8a6417466b32fc99b" target="_blank" rel="noopener noreferrer">4c3a504</a>)</li>
<li>wait for persist state listeners to run when event manager closes (<a href="https://github.com/apify/crawlee/issues/1481" target="_blank" rel="noopener noreferrer">#1481</a>) (<a href="https://github.com/apify/crawlee/commit/aa550edf7e016497e8e0323e18b14bf32b416155" target="_blank" rel="noopener noreferrer">aa550ed</a>)</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-13">Features<a href="#features-13" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<ul>
<li>add <code>Dataset.exportToValue</code> (<a href="https://github.com/apify/crawlee/issues/1553" target="_blank" rel="noopener noreferrer">#1553</a>) (<a href="https://github.com/apify/crawlee/commit/acc6344f0e52854b4c4c833dbf7aede2547c111e" target="_blank" rel="noopener noreferrer">acc6344</a>)</li>
<li>add <code>Dataset.getData()</code> shortcut (<a href="https://github.com/apify/crawlee/commit/522ed6e209aea4aa8285ddbb336f027a36cfb6bc" target="_blank" rel="noopener noreferrer">522ed6e</a>)</li>
<li>add <code>utils.downloadListOfUrls</code> to crawlee metapackage (<a href="https://github.com/apify/crawlee/commit/7b33b0a582a75758cfca53e3ed92d6d3e392b601" target="_blank" rel="noopener noreferrer">7b33b0a</a>)</li>
<li>add <code>utils.parseOpenGraph()</code> (<a href="https://github.com/apify/crawlee/issues/1555" target="_blank" rel="noopener noreferrer">#1555</a>) (<a href="https://github.com/apify/crawlee/commit/059f85ebe577888d448b196f89d0f4ec1dff371e" target="_blank" rel="noopener noreferrer">059f85e</a>)</li>
<li>add <code>utils.playwright.compileScript</code> (<a href="https://github.com/apify/crawlee/issues/1559" target="_blank" rel="noopener noreferrer">#1559</a>) (<a href="https://github.com/apify/crawlee/commit/2e141625f27aa58e2195ab37ed2e31691b58f4c0" target="_blank" rel="noopener noreferrer">2e14162</a>)</li>
<li>add <code>utils.playwright.infiniteScroll</code> (<a href="https://github.com/apify/crawlee/issues/1543" target="_blank" rel="noopener noreferrer">#1543</a>) (<a href="https://github.com/apify/crawlee/commit/60c8289571f3b6bce908ef7d1636b59faebdbf87" target="_blank" rel="noopener noreferrer">60c8289</a>), closes <a href="https://github.com/apify/crawlee/issues/1528" target="_blank" rel="noopener noreferrer">#1528</a></li>
<li>add <code>utils.playwright.saveSnapshot</code> (<a href="https://github.com/apify/crawlee/issues/1544" target="_blank" rel="noopener noreferrer">#1544</a>) (<a href="https://github.com/apify/crawlee/commit/a4ceef044f0c5afdfd964dd1163a260463a60f52" target="_blank" rel="noopener noreferrer">a4ceef0</a>)</li>
<li>add global <code>useState</code> helper (<a href="https://github.com/apify/crawlee/issues/1551" target="_blank" rel="noopener noreferrer">#1551</a>) (<a href="https://github.com/apify/crawlee/commit/2b0317772a2bb0d29b73ff86719caf9db394d507" target="_blank" rel="noopener noreferrer">2b03177</a>)</li>
<li>add static <code>Dataset.exportToValue</code> (<a href="https://github.com/apify/crawlee/issues/1564" target="_blank" rel="noopener noreferrer">#1564</a>) (<a href="https://github.com/apify/crawlee/commit/a7c17d434559785d66c1220d22ea79961bda2eec" target="_blank" rel="noopener noreferrer">a7c17d4</a>)</li>
<li>allow disabling storage persistence (<a href="https://github.com/apify/crawlee/issues/1539" target="_blank" rel="noopener noreferrer">#1539</a>) (<a href="https://github.com/apify/crawlee/commit/f65e3c6a7e1efc02fac5f32046bb27da5a1c8e78" target="_blank" rel="noopener noreferrer">f65e3c6</a>)</li>
<li>bump puppeteer support to 17.x (<a href="https://github.com/apify/crawlee/issues/1519" target="_blank" rel="noopener noreferrer">#1519</a>) (<a href="https://github.com/apify/crawlee/commit/b97a85282b64cfb6d48b0aa71f5cc79525a80295" target="_blank" rel="noopener noreferrer">b97a852</a>)</li>
<li><strong>core:</strong> add <code>forefront</code> option to <code>enqueueLinks</code> helper (<a href="https://github.com/apify/crawlee/commit/f8755b633212138671a76a8d5e0af17c12d46e10" target="_blank" rel="noopener noreferrer">f8755b6</a>), closes <a href="https://github.com/apify/crawlee/issues/1595" target="_blank" rel="noopener noreferrer">#1595</a></li>
<li>don&#x27;t close page before calling errorHandler (<a href="https://github.com/apify/crawlee/issues/1548" target="_blank" rel="noopener noreferrer">#1548</a>) (<a href="https://github.com/apify/crawlee/commit/1c8cd82611e93e4991b49b8ba2f1842457875680" target="_blank" rel="noopener noreferrer">1c8cd82</a>)</li>
<li>enqueue links by clicking for Playwright (<a href="https://github.com/apify/crawlee/issues/1545" target="_blank" rel="noopener noreferrer">#1545</a>) (<a href="https://github.com/apify/crawlee/commit/3d25adefa7570433a9fa636941684bc2701b8ddd" target="_blank" rel="noopener noreferrer">3d25ade</a>)</li>
<li>error tracker (<a href="https://github.com/apify/crawlee/issues/1467" target="_blank" rel="noopener noreferrer">#1467</a>) (<a href="https://github.com/apify/crawlee/commit/6bfe1ce0161f1e26f97e2b8e5c02ec9ca608fe30" target="_blank" rel="noopener noreferrer">6bfe1ce</a>)</li>
<li>make the CLI download directly from GitHub (<a href="https://github.com/apify/crawlee/issues/1540" target="_blank" rel="noopener noreferrer">#1540</a>) (<a href="https://github.com/apify/crawlee/commit/3ff398a2f114760d33c43b5bc0c2447e2e48a72e" target="_blank" rel="noopener noreferrer">3ff398a</a>)</li>
<li><strong>router:</strong> add userdata generic to addHandler (<a href="https://github.com/apify/crawlee/issues/1547" target="_blank" rel="noopener noreferrer">#1547</a>) (<a href="https://github.com/apify/crawlee/commit/19cdf1380abdf9aa8f337a96a4666f8f650bad69" target="_blank" rel="noopener noreferrer">19cdf13</a>)</li>
<li>use JSON5 for <code>INPUT.json</code> to support comments (<a href="https://github.com/apify/crawlee/issues/1538" target="_blank" rel="noopener noreferrer">#1538</a>) (<a href="https://github.com/apify/crawlee/commit/09133ffa744436b60fc452b4f97caf1a18ebfced" target="_blank" rel="noopener noreferrer">09133ff</a>)</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="304-2022-08-22"><a href="https://github.com/apify/crawlee/compare/v3.0.3...v3.0.4" target="_blank" rel="noopener noreferrer">3.0.4</a> (2022-08-22)<a href="#304-2022-08-22" class="hash-link" aria-label="Direct link to 304-2022-08-22" title="Direct link to 304-2022-08-22">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-14">Features<a href="#features-14" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<ul>
<li>bump puppeteer support to 15.1</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bug-fixes-21">Bug Fixes<a href="#bug-fixes-21" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3>
<ul>
<li>key value stores emitting an error when multiple write promises ran in parallel (<a href="https://github.com/apify/crawlee/issues/1460" target="_blank" rel="noopener noreferrer">#1460</a>) (<a href="https://github.com/apify/crawlee/commit/f201cca4a99d1c8b3e87be0289d5b3b363048f09" target="_blank" rel="noopener noreferrer">f201cca</a>)</li>
<li>fix dockerfiles in project templates</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="303-2022-08-11"><a href="https://github.com/apify/crawlee/compare/v3.0.2...v3.0.3" target="_blank" rel="noopener noreferrer">3.0.3</a> (2022-08-11)<a href="#303-2022-08-11" class="hash-link" aria-label="Direct link to 303-2022-08-11" title="Direct link to 303-2022-08-11">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fixes">Fixes<a href="#fixes" class="hash-link" aria-label="Direct link to Fixes" title="Direct link to Fixes">​</a></h3>
<ul>
<li>add missing configuration to CheerioCrawler constructor (<a href="https://github.com/apify/crawlee/pull/1432" target="_blank" rel="noopener noreferrer">#1432</a>)</li>
<li>sendRequest types (<a href="https://github.com/apify/crawlee/pull/1445" target="_blank" rel="noopener noreferrer">#1445</a>)</li>
<li>respect <code>headless</code> option in browser crawlers (<a href="https://github.com/apify/crawlee/pull/1455" target="_blank" rel="noopener noreferrer">#1455</a>)</li>
<li>make <code>CheerioCrawlerOptions</code> type more loose (<a href="https://github.com/apify/crawlee/commit/d871d8caf22bc8d8ca1041e4975f3c95eae4b487" target="_blank" rel="noopener noreferrer">d871d8c</a>)</li>
<li>improve dockerfiles and project templates (<a href="https://github.com/apify/crawlee/commit/7c21a646360d10453f17380f9882ac52d06fedb6" target="_blank" rel="noopener noreferrer">7c21a64</a>)</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-15">Features<a href="#features-15" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<ul>
<li>add <code>utils.playwright.blockRequests()</code> (<a href="https://github.com/apify/crawlee/pull/1447" target="_blank" rel="noopener noreferrer">#1447</a>)</li>
<li>http-crawler (<a href="https://github.com/apify/crawlee/pull/1440" target="_blank" rel="noopener noreferrer">#1440</a>)</li>
<li>prefer <code>/INPUT.json</code> files for <code>KeyValueStore.getInput()</code> (<a href="https://github.com/apify/crawlee/pull/1453" target="_blank" rel="noopener noreferrer">#1453</a>)</li>
<li>jsdom-crawler (<a href="https://github.com/apify/crawlee/pull/1451" target="_blank" rel="noopener noreferrer">#1451</a>)</li>
<li>add <code>RetryRequestError</code> + add error to the context for BC (<a href="https://github.com/apify/crawlee/pull/1443" target="_blank" rel="noopener noreferrer">#1443</a>)</li>
<li>add <code>keepAlive</code> to crawler options (<a href="https://github.com/apify/crawlee/pull/1452" target="_blank" rel="noopener noreferrer">#1452</a>)</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="302-2022-07-28"><a href="https://github.com/apify/crawlee/compare/v3.0.1...v3.0.2" target="_blank" rel="noopener noreferrer">3.0.2</a> (2022-07-28)<a href="#302-2022-07-28" class="hash-link" aria-label="Direct link to 302-2022-07-28" title="Direct link to 302-2022-07-28">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fixes-1">Fixes<a href="#fixes-1" class="hash-link" aria-label="Direct link to Fixes" title="Direct link to Fixes">​</a></h3>
<ul>
<li>regression in resolving the base url for enqueue link filtering (<a href="https://github.com/apify/crawlee/pull/1422" target="_blank" rel="noopener noreferrer">1422</a>)</li>
<li>improve file saving on memory storage (<a href="https://github.com/apify/crawlee/pull/1421" target="_blank" rel="noopener noreferrer">1421</a>)</li>
<li>add <code>UserData</code> type argument to <code>CheerioCrawlingContext</code> and related interfaces (<a href="https://github.com/apify/crawlee/pull/1424" target="_blank" rel="noopener noreferrer">1424</a>)</li>
<li>always limit <code>desiredConcurrency</code> to the value of <code>maxConcurrency</code> (<a href="https://github.com/apify/crawlee/commit/bcb689d4cb90835136295d879e710969ebaf29fa" target="_blank" rel="noopener noreferrer">bcb689d</a>)</li>
<li>wait for storage to finish before resolving <code>crawler.run()</code> (<a href="https://github.com/apify/crawlee/commit/9d62d565c2ff8d058164c22333b07b7d2bf79ee0" target="_blank" rel="noopener noreferrer">9d62d56</a>)</li>
<li>using explicitly typed router with <code>CheerioCrawler</code> (<a href="https://github.com/apify/crawlee/commit/07b7e69e1a7b7c89b8a5538279eb6de8be0effde" target="_blank" rel="noopener noreferrer">07b7e69</a>)</li>
<li>declare dependency on <code>ow</code> in <code>@crawlee/cheerio</code> package (<a href="https://github.com/apify/crawlee/commit/be59f992d2897ce5c02349bbcc62472d99bb2718" target="_blank" rel="noopener noreferrer">be59f99</a>)</li>
<li>use <code>crawlee@^3.0.0</code> in the CLI templates (<a href="https://github.com/apify/crawlee/commit/6426f22ce53fcce91b1d8686577557bae09fc0e9" target="_blank" rel="noopener noreferrer">6426f22</a>)</li>
<li>fix building projects with TS when puppeteer and playwright are not installed (<a href="https://github.com/apify/crawlee/pull/1404" target="_blank" rel="noopener noreferrer">1404</a>)</li>
<li>enqueueLinks should respect full URL of the current request for relative link resolution (<a href="https://github.com/apify/crawlee/pull/1427" target="_blank" rel="noopener noreferrer">1427</a>)</li>
<li>use <code>desiredConcurrency: 10</code> as the default for <code>CheerioCrawler</code> (<a href="https://github.com/apify/crawlee/pull/1428" target="_blank" rel="noopener noreferrer">1428</a>)</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-16">Features<a href="#features-16" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<ul>
<li>feat: allow configuring what status codes will cause session retirement (<a href="https://github.com/apify/crawlee/pull/1423" target="_blank" rel="noopener noreferrer">1423</a>)</li>
<li>feat: add support for middlewares to the <code>Router</code> via <code>use</code> method (<a href="https://github.com/apify/crawlee/pull/1431" target="_blank" rel="noopener noreferrer">1431</a>)</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="301-2022-07-26"><a href="https://github.com/apify/crawlee/compare/v3.0.0...v3.0.1" target="_blank" rel="noopener noreferrer">3.0.1</a> (2022-07-26)<a href="#301-2022-07-26" class="hash-link" aria-label="Direct link to 301-2022-07-26" title="Direct link to 301-2022-07-26">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fixes-2">Fixes<a href="#fixes-2" class="hash-link" aria-label="Direct link to Fixes" title="Direct link to Fixes">​</a></h3>
<ul>
<li>remove <code>JSONData</code> generic type arg from <code>CheerioCrawler</code> in (<a href="https://github.com/apify/crawlee/pull/1402" target="_blank" rel="noopener noreferrer">#1402</a>)</li>
<li>rename default storage folder to just <code>storage</code> in (<a href="https://github.com/apify/crawlee/pull/1403" target="_blank" rel="noopener noreferrer">#1403</a>)</li>
<li>remove trailing slash for proxyUrl in (<a href="https://github.com/apify/crawlee/pull/1405" target="_blank" rel="noopener noreferrer">#1405</a>)</li>
<li>run browser crawlers in headless mode by default in (<a href="https://github.com/apify/crawlee/pull/1409" target="_blank" rel="noopener noreferrer">#1409</a>)</li>
<li>rename interface <code>FailedRequestHandler</code> to <code>ErrorHandler</code> in (<a href="https://github.com/apify/crawlee/pull/1410" target="_blank" rel="noopener noreferrer">#1410</a>)</li>
<li>ensure default route is not ignored in <code>CheerioCrawler</code> in (<a href="https://github.com/apify/crawlee/pull/1411" target="_blank" rel="noopener noreferrer">#1411</a>)</li>
<li>add <code>headless</code> option to <code>BrowserCrawlerOptions</code> in (<a href="https://github.com/apify/crawlee/pull/1412" target="_blank" rel="noopener noreferrer">#1412</a>)</li>
<li>processing custom cookies in (<a href="https://github.com/apify/crawlee/pull/1414" target="_blank" rel="noopener noreferrer">#1414</a>)</li>
<li>enqueue link not finding relative links if the checked page is redirected in (<a href="https://github.com/apify/crawlee/pull/1416" target="_blank" rel="noopener noreferrer">#1416</a>)</li>
<li>fix building projects with TS when puppeteer and playwright are not installed in (<a href="https://github.com/apify/crawlee/pull/1404" target="_blank" rel="noopener noreferrer">#1404</a>)</li>
<li>calling <code>enqueueLinks</code> in browser crawler on page without any links in (<a href="https://github.com/apify/crawlee/commit/385ca27c4c50096f2e28bf0da369d6aaf849a73b" target="_blank" rel="noopener noreferrer">385ca27</a>)</li>
<li>improve error message when no default route provided in (<a href="https://github.com/apify/crawlee/commit/04c3b6ac2fd151379d57e95bde085e2a098d1b76" target="_blank" rel="noopener noreferrer">04c3b6a</a>)</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="features-17">Features<a href="#features-17" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3>
<ul>
<li>feat: add parseWithCheerio for puppeteer &amp; playwright in (<a href="https://github.com/apify/crawlee/pull/1418" target="_blank" rel="noopener noreferrer">#1418</a>)</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="300-2022-07-13"><a href="https://github.com/apify/crawlee/compare/v2.3.2...v3.0.0" target="_blank" rel="noopener noreferrer">3.0.0</a> (2022-07-13)<a href="#300-2022-07-13" class="hash-link" aria-label="Direct link to 300-2022-07-13" title="Direct link to 300-2022-07-13">​</a></h2>
<p>This section summarizes most of the breaking changes between Crawlee (v3) and Apify SDK (v2). Crawlee is the spiritual successor to Apify SDK, so we decided to keep the versioning and release Crawlee as v3.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="crawlee-vs-apify-sdk">Crawlee vs Apify SDK<a href="#crawlee-vs-apify-sdk" class="hash-link" aria-label="Direct link to Crawlee vs Apify SDK" title="Direct link to Crawlee vs Apify SDK">​</a></h3>
<p>Up until version 3 of <code>apify</code>, the package contained both scraping related tools and Apify platform related helper methods. With v3 we are splitting the whole project into two main parts:</p>
<ul>
<li>Crawlee, the new web-scraping library, available as <code>crawlee</code> package on NPM</li>
<li>Apify SDK, helpers for the Apify platform, available as <code>apify</code> package on NPM</li>
</ul>
<p>Moreover, the Crawlee library is published as several packages under <code>@crawlee</code> namespace:</p>
<ul>
<li><code>@crawlee/core</code>: the base for all the crawler implementations, also contains things like <code>Request</code>, <code>RequestQueue</code>, <code>RequestList</code> or <code>Dataset</code> classes</li>
<li><code>@crawlee/basic</code>: exports <code>BasicCrawler</code></li>
<li><code>@crawlee/cheerio</code>: exports <code>CheerioCrawler</code></li>
<li><code>@crawlee/browser</code>: exports <code>BrowserCrawler</code> (which is used for creating <code>@crawlee/playwright</code> and <code>@crawlee/puppeteer</code>)</li>
<li><code>@crawlee/playwright</code>: exports <code>PlaywrightCrawler</code></li>
<li><code>@crawlee/puppeteer</code>: exports <code>PuppeteerCrawler</code></li>
<li><code>@crawlee/memory-storage</code>: <code>@apify/storage-local</code> alternative</li>
<li><code>@crawlee/browser-pool</code>: previously <code>browser-pool</code> package</li>
<li><code>@crawlee/utils</code>: utility methods</li>
<li><code>@crawlee/types</code>: holds TS interfaces mainly about the <code>StorageClient</code></li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="installing-crawlee">Installing Crawlee<a href="#installing-crawlee" class="hash-link" aria-label="Direct link to Installing Crawlee" title="Direct link to Installing Crawlee">​</a></h4>
<blockquote>
<p>As Crawlee is not yet released as <code>latest</code>, we need to install from the <code>next</code> distribution tag!</p>
</blockquote>
<p>Most of the Crawlee packages are extending and reexporting each other, so it&#x27;s enough to install just the one you plan on using, e.g. <code>@crawlee/playwright</code> if you plan on using <code>playwright</code> - it already contains everything from the <code>@crawlee/browser</code> package, which includes everything from <code>@crawlee/basic</code>, which includes everything from <code>@crawlee/core</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> crawlee@next</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Or if all we need is cheerio support, we can install only @crawlee/cheerio</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> @crawlee/cheerio@next</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When using <code>playwright</code> or <code>puppeteer</code>, we still need to install those dependencies explicitly - this allows the users to be in control of which version will be used.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> crawlee@next playwright</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># or npm install @crawlee/playwright@next playwright</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Alternatively we can also use the <code>crawlee</code> meta-package which contains (re-exports) most of the <code>@crawlee/*</code> packages, and therefore contains all the crawler classes.</p>
<blockquote>
<p>Sometimes you might want to use some utility methods from <code>@crawlee/utils</code>, so you might want to install that as well. This package contains some utilities that were previously available under <code>Apify.utils</code>. Browser related utilities can be also found in the crawler packages (e.g. <code>@crawlee/playwright</code>).</p>
</blockquote>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="full-typescript-support">Full TypeScript support<a href="#full-typescript-support" class="hash-link" aria-label="Direct link to Full TypeScript support" title="Direct link to Full TypeScript support">​</a></h3>
<p>Both Crawlee and Apify SDK are full TypeScript rewrite, so they include up-to-date types in the package. For your TypeScript crawlers we recommend using our predefined TypeScript configuration from <code>@apify/tsconfig</code> package. Don&#x27;t forget to set the <code>module</code> and <code>target</code> to <code>ES2022</code> or above to be able to use top level await.</p>
<blockquote>
<p>The <code>@apify/tsconfig</code> config has <a href="https://www.typescriptlang.org/tsconfig#noImplicitAny" target="_blank" rel="noopener noreferrer"><code>noImplicitAny</code></a> enabled, you might want to disable it during the initial development as it will cause build failures if you left some unused local variables in your code.</p>
</blockquote>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">tsconfig.json</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;extends&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@apify/tsconfig&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;compilerOptions&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;module&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ES2022&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;target&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ES2022&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;outDir&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;dist&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;lib&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;DOM&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;include&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;./src/**/*&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="docker-build">Docker build<a href="#docker-build" class="hash-link" aria-label="Direct link to Docker build" title="Direct link to Docker build">​</a></h4>
<p>For <code>Dockerfile</code> we recommend using multi-stage build, so you don&#x27;t install the dev dependencies like TypeScript in your final image:</p>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Dockerfile</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># using multistage build, as we need dev deps to build the TS source code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> apify/actor-node:16 </span><span class="token instruction keyword" style="color:#00009f">AS</span><span class="token instruction"> builder</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># copy all files, install all dependencies (including dev deps) and build the project</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> . ./</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> npm install --include=dev </span><span class="token instruction operator" style="color:#393A34">\</span><span class="token instruction"></span><br></span><span class="token-line" style="color:#393A34"><span class="token instruction">    &amp;&amp; npm run build</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># create final image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> apify/actor-node:16</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># copy only necessary files</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> </span><span class="token instruction options property" style="color:#36acaa">--from</span><span class="token instruction options punctuation" style="color:#393A34">=</span><span class="token instruction options string" style="color:#e3116c">builder</span><span class="token instruction"> /usr/src/app/package*.json ./</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> </span><span class="token instruction options property" style="color:#36acaa">--from</span><span class="token instruction options punctuation" style="color:#393A34">=</span><span class="token instruction options string" style="color:#e3116c">builder</span><span class="token instruction"> /usr/src/app/README.md ./</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> </span><span class="token instruction options property" style="color:#36acaa">--from</span><span class="token instruction options punctuation" style="color:#393A34">=</span><span class="token instruction options string" style="color:#e3116c">builder</span><span class="token instruction"> /usr/src/app/dist ./dist</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> </span><span class="token instruction options property" style="color:#36acaa">--from</span><span class="token instruction options punctuation" style="color:#393A34">=</span><span class="token instruction options string" style="color:#e3116c">builder</span><span class="token instruction"> /usr/src/app/apify.json ./apify.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> </span><span class="token instruction options property" style="color:#36acaa">--from</span><span class="token instruction options punctuation" style="color:#393A34">=</span><span class="token instruction options string" style="color:#e3116c">builder</span><span class="token instruction"> /usr/src/app/INPUT_SCHEMA.json ./INPUT_SCHEMA.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># install only prod deps</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">RUN</span><span class="token instruction"> npm --quiet set progress=false </span><span class="token instruction operator" style="color:#393A34">\</span><span class="token instruction"></span><br></span><span class="token-line" style="color:#393A34"><span class="token instruction">    &amp;&amp; npm install --only=prod --no-optional </span><span class="token instruction operator" style="color:#393A34">\</span><span class="token instruction"></span><br></span><span class="token-line" style="color:#393A34"><span class="token instruction">    &amp;&amp; echo </span><span class="token instruction string" style="color:#e3116c">&quot;Installed NPM packages:&quot;</span><span class="token instruction"> </span><span class="token instruction operator" style="color:#393A34">\</span><span class="token instruction"></span><br></span><span class="token-line" style="color:#393A34"><span class="token instruction">    &amp;&amp; (npm list --only=prod --no-optional --all || true) </span><span class="token instruction operator" style="color:#393A34">\</span><span class="token instruction"></span><br></span><span class="token-line" style="color:#393A34"><span class="token instruction">    &amp;&amp; echo </span><span class="token instruction string" style="color:#e3116c">&quot;Node.js version:&quot;</span><span class="token instruction"> </span><span class="token instruction operator" style="color:#393A34">\</span><span class="token instruction"></span><br></span><span class="token-line" style="color:#393A34"><span class="token instruction">    &amp;&amp; node --version </span><span class="token instruction operator" style="color:#393A34">\</span><span class="token instruction"></span><br></span><span class="token-line" style="color:#393A34"><span class="token instruction">    &amp;&amp; echo </span><span class="token instruction string" style="color:#e3116c">&quot;NPM version:&quot;</span><span class="token instruction"> </span><span class="token instruction operator" style="color:#393A34">\</span><span class="token instruction"></span><br></span><span class="token-line" style="color:#393A34"><span class="token instruction">    &amp;&amp; npm --version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># run compiled code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">CMD</span><span class="token instruction"> npm run start:prod</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="browser-fingerprints">Browser fingerprints<a href="#browser-fingerprints" class="hash-link" aria-label="Direct link to Browser fingerprints" title="Direct link to Browser fingerprints">​</a></h3>
<p>Previously we had a magical <code>stealth</code> option in the puppeteer crawler that enabled several tricks aiming to mimic the real users as much as possible. While this worked to a certain degree, we decided to replace it with generated browser fingerprints.</p>
<p>In case we don&#x27;t want to have dynamic fingerprints, we can disable this behaviour via <code>useFingerprints</code> in <code>browserPoolOptions</code>:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> crawler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">PlaywrightCrawler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   browserPoolOptions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       useFingerprints</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="session-cookie-method-renames">Session cookie method renames<a href="#session-cookie-method-renames" class="hash-link" aria-label="Direct link to Session cookie method renames" title="Direct link to Session cookie method renames">​</a></h3>
<p>Previously, if we wanted to get or add cookies for the session that would be used for the request, we had to call <code>session.getPuppeteerCookies()</code> or <code>session.setPuppeteerCookies()</code>. Since this method could be used for any of our crawlers, not just <code>PuppeteerCrawler</code>, the methods have been renamed to <code>session.getCookies()</code> and <code>session.setCookies()</code> respectively. Otherwise, their usage is exactly the same!</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="memory-storage">Memory storage<a href="#memory-storage" class="hash-link" aria-label="Direct link to Memory storage" title="Direct link to Memory storage">​</a></h3>
<p>When we store some data or intermediate state (like the one <code>RequestQueue</code> holds), we now use <code>@crawlee/memory-storage</code> by default. It is an alternative to the <code>@apify/storage-local</code>, that stores the state inside memory (as opposed to SQLite database used by <code>@apify/storage-local</code>). While the state is stored in memory, it also dumps it to the file system, so we can observe it, as well as respects the existing data stored in KeyValueStore (e.g. the <code>INPUT.json</code> file).</p>
<p>When we want to run the crawler on Apify platform, we need to use <code>Actor.init</code> or <code>Actor.main</code>, which will automatically switch the storage client to <code>ApifyClient</code> when on the Apify platform.</p>
<p>We can still use the <code>@apify/storage-local</code>, to do it, first install it pass it to the <code>Actor.init</code> or <code>Actor.main</code> options:</p>
<blockquote>
<p><code>@apify/storage-local</code> v2.1.0+ is required for Crawlee</p>
</blockquote>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Actor </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;apify&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> ApifyStorageLocal </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@apify/storage-local&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> storage </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ApifyStorageLocal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token comment" style="color:#999988;font-style:italic">/* options like `enableWalMode` belong here */</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Actor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> storage </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="purging-of-the-default-storage">Purging of the default storage<a href="#purging-of-the-default-storage" class="hash-link" aria-label="Direct link to Purging of the default storage" title="Direct link to Purging of the default storage">​</a></h3>
<p>Previously the state was preserved between local runs, and we had to use <code>--purge</code> argument of the <code>apify-cli</code>. With Crawlee, this is now the default behaviour, we purge the storage automatically on <code>Actor.init/main</code> call. We can opt out of it via <code>purge: false</code> in the <code>Actor.init</code> options.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="renamed-crawler-options-and-interfaces">Renamed crawler options and interfaces<a href="#renamed-crawler-options-and-interfaces" class="hash-link" aria-label="Direct link to Renamed crawler options and interfaces" title="Direct link to Renamed crawler options and interfaces">​</a></h3>
<p>Some options were renamed to better reflect what they do. We still support all the old parameter names too, but not at the TS level.</p>
<ul>
<li><code>handleRequestFunction</code> -&gt; <code>requestHandler</code></li>
<li><code>handlePageFunction</code> -&gt; <code>requestHandler</code></li>
<li><code>handleRequestTimeoutSecs</code> -&gt; <code>requestHandlerTimeoutSecs</code></li>
<li><code>handlePageTimeoutSecs</code> -&gt; <code>requestHandlerTimeoutSecs</code></li>
<li><code>requestTimeoutSecs</code> -&gt; <code>navigationTimeoutSecs</code></li>
<li><code>handleFailedRequestFunction</code> -&gt; <code>failedRequestHandler</code></li>
</ul>
<p>We also renamed the crawling context interfaces, so they follow the same convention and are more meaningful:</p>
<ul>
<li><code>CheerioHandlePageInputs</code> -&gt; <code>CheerioCrawlingContext</code></li>
<li><code>PlaywrightHandlePageFunction</code> -&gt; <code>PlaywrightCrawlingContext</code></li>
<li><code>PuppeteerHandlePageFunction</code> -&gt; <code>PuppeteerCrawlingContext</code></li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="context-aware-helpers">Context aware helpers<a href="#context-aware-helpers" class="hash-link" aria-label="Direct link to Context aware helpers" title="Direct link to Context aware helpers">​</a></h3>
<p>Some utilities previously available under <code>Apify.utils</code> namespace are now moved to the crawling context and are <em>context aware</em>. This means they have some parameters automatically filled in from the context, like the current <code>Request</code> instance or current <code>Page</code> object, or the <code>RequestQueue</code> bound to the crawler.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="enqueuing-links">Enqueuing links<a href="#enqueuing-links" class="hash-link" aria-label="Direct link to Enqueuing links" title="Direct link to Enqueuing links">​</a></h4>
<p>One common helper that received more attention is the <code>enqueueLinks</code>. As mentioned above, it is context aware - we no longer need pass in the <code>requestQueue</code> or <code>page</code> arguments (or the cheerio handle <code>$</code>). In addition to that, it now offers 3 enqueuing strategies:</p>
<ul>
<li><code>EnqueueStrategy.All</code> (<code>&#x27;all&#x27;</code>): Matches any URLs found</li>
<li><code>EnqueueStrategy.SameHostname</code> (<code>&#x27;same-hostname&#x27;</code>) Matches any URLs that have the same subdomain as the base URL (default)</li>
<li><code>EnqueueStrategy.SameDomain</code> (<code>&#x27;same-domain&#x27;</code>) Matches any URLs that have the same domain name. For example, <code>https://wow.an.example.com</code> and <code>https://example.com</code> will both be matched for a base url of <code>https://example.com</code>.</li>
</ul>
<p>This means we can even call <code>enqueueLinks()</code> without any parameters. By default, it will go through all the links found on current page and filter only those targeting the same subdomain.</p>
<p>Moreover, we can specify patterns the URL should match via globs:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> crawler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">PlaywrightCrawler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> enqueueLinks </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">enqueueLinks</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            globs</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;https://apify.com/*/*&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// we can also use `regexps` and `pseudoUrls` keys here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="implicit-requestqueue-instance">Implicit <code>RequestQueue</code> instance<a href="#implicit-requestqueue-instance" class="hash-link" aria-label="Direct link to implicit-requestqueue-instance" title="Direct link to implicit-requestqueue-instance">​</a></h3>
<p>All crawlers now have the <code>RequestQueue</code> instance automatically available via <code>crawler.getRequestQueue()</code> method. It will create the instance for you if it does not exist yet. This mean we no longer need to create the <code>RequestQueue</code> instance manually, and we can just use <code>crawler.addRequests()</code> method described underneath.</p>
<blockquote>
<p>We can still create the <code>RequestQueue</code> explicitly, the <code>crawler.getRequestQueue()</code> method will respect that and return the instance provided via crawler options.</p>
</blockquote>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="crawleraddrequests"><code>crawler.addRequests()</code><a href="#crawleraddrequests" class="hash-link" aria-label="Direct link to crawleraddrequests" title="Direct link to crawleraddrequests">​</a></h3>
<p>We can now add multiple requests in batches. The newly added <code>addRequests</code> method will handle everything for us. It enqueues the first 1000 requests and resolves, while continuing with the rest in the background, again in a smaller 1000 items batches, so we don&#x27;t fall into any API rate limits. This means the crawling will start almost immediately (within few seconds at most), something previously possible only with a combination of <code>RequestQueue</code> and <code>RequestList</code>.</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// will resolve right after the initial batch of 1000 requests is added</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> crawler</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addRequests</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token comment" style="color:#999988;font-style:italic">/* many requests, can be even millions */</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// if we want to wait for all the requests to be added, we can await the `waitForAllRequestsToBeAdded` promise</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">waitForAllRequestsToBeAdded</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="less-verbose-error-logging">Less verbose error logging<a href="#less-verbose-error-logging" class="hash-link" aria-label="Direct link to Less verbose error logging" title="Direct link to Less verbose error logging">​</a></h3>
<p>Previously an error thrown from inside request handler resulted in full error object being logged. With Crawlee, we log only the error message as a warning as long as we know the request will be retried. If you want to enable verbose logging like in v2, use the <code>CRAWLEE_VERBOSE_LOG</code> env var.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="removal-of-requestasbrowser">Removal of <code>requestAsBrowser</code><a href="#removal-of-requestasbrowser" class="hash-link" aria-label="Direct link to removal-of-requestasbrowser" title="Direct link to removal-of-requestasbrowser">​</a></h3>
<p>In v1 we replaced the underlying implementation of <code>requestAsBrowser</code> to be just a proxy over calling <a href="https://github.com/apify/got-scraping" target="_blank" rel="noopener noreferrer"><code>got-scraping</code></a> - our custom extension to <code>got</code> that tries to mimic the real browsers as much as possible. With v3, we are removing the <code>requestAsBrowser</code>, encouraging the use of <a href="https://github.com/apify/got-scraping" target="_blank" rel="noopener noreferrer"><code>got-scraping</code></a> directly.</p>
<p>For easier migration, we also added <code>context.sendRequest()</code> helper that allows processing the context bound <code>Request</code> object through <a href="https://github.com/apify/got-scraping" target="_blank" rel="noopener noreferrer"><code>got-scraping</code></a>:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> crawler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">BasicCrawler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> sendRequest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> log </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// we can use the options parameter to override gotScraping options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sendRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> responseType</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;received body&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">body</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-to-use-sendrequest">How to use <code>sendRequest()</code>?<a href="#how-to-use-sendrequest" class="hash-link" aria-label="Direct link to how-to-use-sendrequest" title="Direct link to how-to-use-sendrequest">​</a></h4>
<p>See <a href="https://crawlee.dev/docs/guides/got-scraping" target="_blank" rel="noopener noreferrer">the Got Scraping guide</a>.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="removed-options">Removed options<a href="#removed-options" class="hash-link" aria-label="Direct link to Removed options" title="Direct link to Removed options">​</a></h4>
<p>The <code>useInsecureHttpParser</code> option has been removed. It&#x27;s permanently set to <code>true</code> in order to better mimic browsers&#x27; behavior.</p>
<p>Got Scraping automatically performs protocol negotiation, hence we removed the <code>useHttp2</code> option. It&#x27;s set to <code>true</code> - 100% of browsers nowadays are capable of HTTP/2 requests. Oh, more and more of the web is using it too!</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="renamed-options">Renamed options<a href="#renamed-options" class="hash-link" aria-label="Direct link to Renamed options" title="Direct link to Renamed options">​</a></h4>
<p>In the <code>requestAsBrowser</code> approach, some of the options were named differently. Here&#x27;s a list of renamed options:</p>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="payload"><code>payload</code><a href="#payload" class="hash-link" aria-label="Direct link to payload" title="Direct link to payload">​</a></h5>
<p>This options represents the body to send. It could be a <code>string</code> or a <code>Buffer</code>. However, there is no <code>payload</code> option anymore. You need to use <code>body</code> instead. Or, if you wish to send JSON, <code>json</code>. Here&#x27;s an example:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Apify</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">utils</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">requestAsBrowser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> …</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> payload</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Hello, world!&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Apify</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">utils</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">requestAsBrowser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> …</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> payload</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;c0ffe&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hex&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Apify</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">utils</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">requestAsBrowser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> …</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> json</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> hello</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;world&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">gotScraping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> …</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Hello, world!&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">gotScraping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> …</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;c0ffe&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;hex&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">gotScraping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> …</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> json</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> hello</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;world&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ignoresslerrors"><code>ignoreSslErrors</code><a href="#ignoresslerrors" class="hash-link" aria-label="Direct link to ignoresslerrors" title="Direct link to ignoresslerrors">​</a></h5>
<p>It has been renamed to <code>https.rejectUnauthorized</code>. By default, it&#x27;s set to <code>false</code> for convenience. However, if you want to make sure the connection is secure, you can do the following:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Apify</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">utils</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">requestAsBrowser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> …</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ignoreSslErrors</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">gotScraping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> …</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> https</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> rejectUnauthorized</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Please note: the meanings are opposite! So we needed to invert the values as well.</p>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="header-generator-options"><code>header-generator</code> options<a href="#header-generator-options" class="hash-link" aria-label="Direct link to header-generator-options" title="Direct link to header-generator-options">​</a></h5>
<p><code>useMobileVersion</code>, <code>languageCode</code> and <code>countryCode</code> no longer exist. Instead, you need to use <code>headerGeneratorOptions</code> directly:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Apify</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">utils</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">requestAsBrowser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    …</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    useMobileVersion</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    languageCode</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;en&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    countryCode</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;US&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">gotScraping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    …</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    headerGeneratorOptions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        devices</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;mobile&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// or [&#x27;desktop&#x27;]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        locales</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;en-US&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="timeoutsecs"><code>timeoutSecs</code><a href="#timeoutsecs" class="hash-link" aria-label="Direct link to timeoutsecs" title="Direct link to timeoutsecs">​</a></h5>
<p>In order to set a timeout, use <code>timeout.request</code> (which is <strong>milliseconds</strong> now).</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Apify</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">utils</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">requestAsBrowser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    …</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timeoutSecs</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">gotScraping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    …</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timeout</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="throwonhttperrors"><code>throwOnHttpErrors</code><a href="#throwonhttperrors" class="hash-link" aria-label="Direct link to throwonhttperrors" title="Direct link to throwonhttperrors">​</a></h5>
<p><code>throwOnHttpErrors</code> → <code>throwHttpErrors</code>. This options throws on unsuccessful HTTP status codes, for example <code>404</code>. By default, it&#x27;s set to <code>false</code>.</p>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="decodebody"><code>decodeBody</code><a href="#decodebody" class="hash-link" aria-label="Direct link to decodebody" title="Direct link to decodebody">​</a></h5>
<p><code>decodeBody</code> → <code>decompress</code>. This options decompresses the body. Defaults to <code>true</code> - please do not change this or websites will break (unless you know what you&#x27;re doing!).</p>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="abortfunction"><code>abortFunction</code><a href="#abortfunction" class="hash-link" aria-label="Direct link to abortfunction" title="Direct link to abortfunction">​</a></h5>
<p>This function used to make the promise throw on specific responses, if it returned <code>true</code>. However, it wasn&#x27;t that useful.</p>
<p>You probably want to cancel the request instead, which you can do in the following way:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> promise </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">gotScraping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">…</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;request&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> request </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Please note this is not a Got Request instance, but a ClientRequest one.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// https://nodejs.org/api/http.html#class-httpclientrequest</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">protocol </span><span class="token operator" style="color:#393A34">!==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;https:&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Unsecure request, abort.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">cancel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// If you set `isStream` to `true`, please use `stream.destroy()` instead.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> promise</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="removal-of-browser-pool-plugin-mixing">Removal of browser pool plugin mixing<a href="#removal-of-browser-pool-plugin-mixing" class="hash-link" aria-label="Direct link to Removal of browser pool plugin mixing" title="Direct link to Removal of browser pool plugin mixing">​</a></h3>
<p>Previously, you were able to have a browser pool that would mix Puppeteer and Playwright plugins (or even your own custom plugins if you&#x27;ve built any). As of this version, that is no longer allowed, and creating such a browser pool will cause an error to be thrown (it&#x27;s expected that all plugins that will be used are of the same type).</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="handling-requests-outside-of-browser">Handling requests outside of browser<a href="#handling-requests-outside-of-browser" class="hash-link" aria-label="Direct link to Handling requests outside of browser" title="Direct link to Handling requests outside of browser">​</a></h3>
<p>One small feature worth mentioning is the ability to handle requests with browser crawlers outside the browser. To do that, we can use a combination of <code>Request.skipNavigation</code> and <code>context.sendRequest()</code>.</p>
<p>Take a look at how to achieve this by checking out the <a href="https://crawlee.dev/docs/examples/skip-navigation" target="_blank" rel="noopener noreferrer">Skipping navigation for certain requests</a> example!</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="logging">Logging<a href="#logging" class="hash-link" aria-label="Direct link to Logging" title="Direct link to Logging">​</a></h3>
<p>Crawlee exports the default <code>log</code> instance directly as a named export. We also have a scoped <code>log</code> instance provided in the crawling context - this one will log messages prefixed with the crawler name and should be preferred for logging inside the request handler.</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> crawler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">CheerioCrawler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> log</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> request </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Opened </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">request</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation">loadedUrl</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="auto-saved-crawler-state">Auto-saved crawler state<a href="#auto-saved-crawler-state" class="hash-link" aria-label="Direct link to Auto-saved crawler state" title="Direct link to Auto-saved crawler state">​</a></h3>
<p>Every crawler instance now has <code>useState()</code> method that will return a state object we can use. It will be automatically saved when <code>persistState</code> event occurs. The value is cached, so we can freely call this method multiple times and get the exact same reference. No need to worry about saving the value either, as it will happen automatically.</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> crawler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">CheerioCrawler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> crawler </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> state </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> crawler</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> foo</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// just change the value, no need to care about saving it</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">foo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">123</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="apify-sdk">Apify SDK<a href="#apify-sdk" class="hash-link" aria-label="Direct link to Apify SDK" title="Direct link to Apify SDK">​</a></h3>
<p>The Apify platform helpers can be now found in the Apify SDK (<code>apify</code> NPM package). It exports the <code>Actor</code> class that offers following static helpers:</p>
<ul>
<li><code>ApifyClient</code> shortcuts: <code>addWebhook()</code>, <code>call()</code>, <code>callTask()</code>, <code>metamorph()</code></li>
<li>helpers for running on Apify platform: <code>init()</code>, <code>exit()</code>, <code>fail()</code>, <code>main()</code>, <code>isAtHome()</code>, <code>createProxyConfiguration()</code></li>
<li>storage support: <code>getInput()</code>, <code>getValue()</code>, <code>openDataset()</code>, <code>openKeyValueStore()</code>, <code>openRequestQueue()</code>, <code>pushData()</code>, <code>setValue()</code></li>
<li>events support: <code>on()</code>, <code>off()</code></li>
<li>other utilities: <code>getEnv()</code>, <code>newClient()</code>, <code>reboot()</code></li>
</ul>
<p><code>Actor.main</code> is now just a syntax sugar around calling <code>Actor.init()</code> at the beginning and <code>Actor.exit()</code> at the end (plus wrapping the user function in try/catch block). All those methods are async and should be awaited - with node 16 we can use the top level await for that. In other words, following is equivalent:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Actor </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;apify&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Actor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// your code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Actor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Crawling finished!&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Actor </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;apify&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> Actor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// your code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> statusMessage</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Crawling finished!&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>Actor.init()</code> will conditionally set the storage implementation of Crawlee to the <code>ApifyClient</code> when running on the Apify platform, or keep the default (memory storage) implementation otherwise. It will also subscribe to the websocket events (or mimic them locally). <code>Actor.exit()</code> will handle the tear down and calls <code>process.exit()</code> to ensure our process won&#x27;t hang indefinitely for some reason.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="events">Events<a href="#events" class="hash-link" aria-label="Direct link to Events" title="Direct link to Events">​</a></h4>
<p>Apify SDK (v2) exports <code>Apify.events</code>, which is an <code>EventEmitter</code> instance. With Crawlee, the events are managed by <a href="https://crawlee.dev/api/core/class/EventManager" target="_blank" rel="noopener noreferrer"><code>EventManager</code></a> class instead. We can either access it via <code>Actor.eventManager</code> getter, or use <code>Actor.on</code> and <code>Actor.off</code> shortcuts instead.</p>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted prefix deleted" style="color:#d73a49">-</span><span class="token deleted-sign deleted line" style="color:#d73a49">Apify.events.on(...);</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted line" style="color:#d73a49"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">Actor.on(...);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>We can also get the <a href="https://crawlee.dev/api/core/class/EventManager" target="_blank" rel="noopener noreferrer"><code>EventManager</code></a> instance via <code>Configuration.getEventManager()</code>.</p>
</blockquote>
<p>In addition to the existing events, we now have an <code>exit</code> event fired when calling <code>Actor.exit()</code> (which is called at the end of <code>Actor.main()</code>). This event allows you to gracefully shut down any resources when <code>Actor.exit</code> is called.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="smallerinternal-breaking-changes">Smaller/internal breaking changes<a href="#smallerinternal-breaking-changes" class="hash-link" aria-label="Direct link to Smaller/internal breaking changes" title="Direct link to Smaller/internal breaking changes">​</a></h3>
<ul>
<li><code>Apify.call()</code> is now just a shortcut for running <code>ApifyClient.actor(actorId).call(input, options)</code>, while also taking the token inside env vars into account</li>
<li><code>Apify.callTask()</code> is now just a shortcut for running <code>ApifyClient.task(taskId).call(input, options)</code>, while also taking the token inside env vars into account</li>
<li><code>Apify.metamorph()</code> is now just a shortcut for running <code>ApifyClient.task(taskId).metamorph(input, options)</code>, while also taking the ACTOR_RUN_ID inside env vars into account</li>
<li><code>Apify.waitForRunToFinish()</code> has been removed, use <code>ApifyClient.waitForFinish()</code> instead</li>
<li><code>Actor.main/init</code> purges the storage by default</li>
<li>remove <code>purgeLocalStorage</code> helper, move purging to the storage class directly<!-- -->
<ul>
<li><code>StorageClient</code> interface now has optional <code>purge</code> method</li>
<li>purging happens automatically via <code>Actor.init()</code> (you can opt out via <code>purge: false</code> in the options of <code>init/main</code> methods)</li>
</ul>
</li>
<li><code>QueueOperationInfo.request</code> is no longer available</li>
<li><code>Request.handledAt</code> is now string date in ISO format</li>
<li><code>Request.inProgress</code> and <code>Request.reclaimed</code> are now <code>Set</code>s instead of POJOs</li>
<li><code>injectUnderscore</code> from puppeteer utils has been removed</li>
<li><code>APIFY_MEMORY_MBYTES</code> is no longer taken into account, use <code>CRAWLEE_AVAILABLE_MEMORY_RATIO</code> instead</li>
<li>some <code>AutoscaledPool</code> options are no longer available:<!-- -->
<ul>
<li><code>cpuSnapshotIntervalSecs</code> and <code>memorySnapshotIntervalSecs</code> has been replaced with top level <code>systemInfoIntervalMillis</code> configuration</li>
<li><code>maxUsedCpuRatio</code> has been moved to the top level configuration</li>
</ul>
</li>
<li><code>ProxyConfiguration.newUrlFunction</code> can be async. <code>.newUrl()</code> and <code>.newProxyInfo()</code> now return promises.</li>
<li><code>prepareRequestFunction</code> and <code>postResponseFunction</code> options are removed, use navigation hooks instead</li>
<li><code>gotoFunction</code> and <code>gotoTimeoutSecs</code> are removed</li>
<li>removed compatibility fix for old/broken request queues with null <code>Request</code> props</li>
<li><code>fingerprintsOptions</code> renamed to <code>fingerprintOptions</code> (<code>fingerprints</code> -&gt; <code>fingerprint</code>).</li>
<li><code>fingerprintOptions</code> now accept <code>useFingerprintCache</code> and <code>fingerprintCacheSize</code> (instead of <code>useFingerprintPerProxyCache</code> and <code>fingerprintPerProxyCacheSize</code>, which are now no longer available). This is because the cached fingerprints are no longer connected to proxy URLs but to sessions.</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="232-2022-05-05"><a href="https://github.com/apify/crawlee/compare/v2.3.1...v2.3.2" target="_blank" rel="noopener noreferrer">2.3.2</a> (2022-05-05)<a href="#232-2022-05-05" class="hash-link" aria-label="Direct link to 232-2022-05-05" title="Direct link to 232-2022-05-05">​</a></h2>
<ul>
<li>fix: use default user agent for playwright with chrome instead of the default &quot;headless UA&quot;</li>
<li>fix: always hide webdriver of chrome browsers</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="231-2022-05-03"><a href="https://github.com/apify/crawlee/compare/v2.3.0...v2.3.1" target="_blank" rel="noopener noreferrer">2.3.1</a> (2022-05-03)<a href="#231-2022-05-03" class="hash-link" aria-label="Direct link to 231-2022-05-03" title="Direct link to 231-2022-05-03">​</a></h2>
<ul>
<li>fix: <code>utils.apifyClient</code> early instantiation (#1330)</li>
<li>feat: <code>utils.playwright.injectJQuery()</code> (#1337)</li>
<li>feat: add <code>keyValueStore</code> option to <code>Statistics</code> class (#1345)</li>
<li>fix: ensure failed req count is correct when using <code>RequestList</code> (#1347)</li>
<li>fix: random puppeteer crawler (running in headful mode) failure (#1348)<!-- -->
<blockquote>
<p>This should help with the <code>We either navigate top level or have old version of the navigated frame</code> bug in puppeteer.</p>
</blockquote>
</li>
<li>fix: allow returning falsy values in <code>RequestTransform</code>&#x27;s return type</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="230-2022-04-07"><a href="https://github.com/apify/crawlee/compare/v2.2.2...v2.3.0" target="_blank" rel="noopener noreferrer">2.3.0</a> (2022-04-07)<a href="#230-2022-04-07" class="hash-link" aria-label="Direct link to 230-2022-04-07" title="Direct link to 230-2022-04-07">​</a></h2>
<ul>
<li>feat: accept more social media patterns (#1286)</li>
<li>feat: add multiple click support to <code>enqueueLinksByClickingElements</code> (#1295)</li>
<li>feat: instance-scoped &quot;global&quot; configuration (#1315)</li>
<li>feat: requestList accepts proxyConfiguration for requestsFromUrls (#1317)</li>
<li>feat: update <code>playwright</code> to v1.20.2</li>
<li>feat: update <code>puppeteer</code> to v13.5.2<!-- -->
<blockquote>
<p>We noticed that with this version of puppeteer actor run could crash with
<code>We either navigate top level or have old version of the navigated frame</code> error
(puppeteer issue <a href="https://github.com/puppeteer/puppeteer/issues/7050" target="_blank" rel="noopener noreferrer">here</a>).
It should not happen while running the browser in headless mode.
In case you need to run the browser in headful mode (<code>headless: false</code>),
we recommend pinning puppeteer version to <code>10.4.0</code> in actor <code>package.json</code> file.</p>
</blockquote>
</li>
<li>feat: stealth deprecation (#1314)</li>
<li>feat: allow passing a stream to KeyValueStore.setRecord (#1325)</li>
<li>fix: use correct apify-client instance for snapshotting (#1308)</li>
<li>fix: automatically reset <code>RequestQueue</code> state after 5 minutes of inactivity, closes #997</li>
<li>fix: improve guessing of chrome executable path on windows (#1294)</li>
<li>fix: prune CPU snapshots locally (#1313)</li>
<li>fix: improve browser launcher types (#1318)</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="0-concurrency-mitigation">0 concurrency mitigation<a href="#0-concurrency-mitigation" class="hash-link" aria-label="Direct link to 0 concurrency mitigation" title="Direct link to 0 concurrency mitigation">​</a></h3>
<p>This release should resolve the 0 concurrency bug by automatically resetting the
internal <code>RequestQueue</code> state after 5 minutes of inactivity.</p>
<p>We now track last activity done on a <code>RequestQueue</code> instance:</p>
<ul>
<li>added new request</li>
<li>started processing a request (added to <code>inProgress</code> cache)</li>
<li>marked request as handled</li>
<li>reclaimed request</li>
</ul>
<p>If we don&#x27;t detect one of those actions in last 5 minutes, and we have some
requests in the <code>inProgress</code> cache, we try to reset the state. We can override
this limit via <code>CRAWLEE_INTERNAL_TIMEOUT</code> env var.</p>
<p>This should finally resolve the 0 concurrency bug, as it was always about
stuck requests in the <code>inProgress</code> cache.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="222-2022-02-14"><a href="https://github.com/apify/crawlee/compare/v2.2.1...v2.2.2" target="_blank" rel="noopener noreferrer">2.2.2</a> (2022-02-14)<a href="#222-2022-02-14" class="hash-link" aria-label="Direct link to 222-2022-02-14" title="Direct link to 222-2022-02-14">​</a></h2>
<ul>
<li>fix: ensure <code>request.headers</code> is set</li>
<li>fix: lower <code>RequestQueue</code> API timeout to 30 seconds</li>
<li>improve logging for fetching next request and timeouts</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="221-2022-01-03"><a href="https://github.com/apify/crawlee/compare/v2.2.0...v2.2.1" target="_blank" rel="noopener noreferrer">2.2.1</a> (2022-01-03)<a href="#221-2022-01-03" class="hash-link" aria-label="Direct link to 221-2022-01-03" title="Direct link to 221-2022-01-03">​</a></h2>
<ul>
<li>fix: ignore requests that are no longer in progress (#1258)</li>
<li>fix: do not use <code>tryCancel()</code> from inside sync callback (#1265)</li>
<li>fix: revert to puppeteer 10.x (#1276)</li>
<li>fix: wait when <code>body</code> is not available in <code>infiniteScroll()</code> from Puppeteer utils (#1238)</li>
<li>fix: expose logger classes on the <code>utils.log</code> instance (#1278)</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="220-2021-12-17"><a href="https://github.com/apify/crawlee/compare/v2.1.0...v2.2.0" target="_blank" rel="noopener noreferrer">2.2.0</a> (2021-12-17)<a href="#220-2021-12-17" class="hash-link" aria-label="Direct link to 220-2021-12-17" title="Direct link to 220-2021-12-17">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="proxy-per-page">Proxy per page<a href="#proxy-per-page" class="hash-link" aria-label="Direct link to Proxy per page" title="Direct link to Proxy per page">​</a></h3>
<p>Up until now, browser crawlers used the same session (and therefore the same proxy) for
all request from a single browser * now get a new proxy for each session. This means
that with incognito pages, each page will get a new proxy, aligning the behaviour with
<code>CheerioCrawler</code>.</p>
<p>This feature is not enabled by default. To use it, we need to enable <code>useIncognitoPages</code>
flag under <code>launchContext</code>:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Apify</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Playwright</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    launchContext</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        useIncognitoPages</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>Note that currently there is a performance overhead for using <code>useIncognitoPages</code>.
Use this flag at your own will.</p>
</blockquote>
<p>We are planning to enable this feature by default in SDK v3.0.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="abortable-timeouts">Abortable timeouts<a href="#abortable-timeouts" class="hash-link" aria-label="Direct link to Abortable timeouts" title="Direct link to Abortable timeouts">​</a></h3>
<p>Previously when a page function timed out, the task still kept running. This could lead to requests being processed multiple times. In v2.2 we now have abortable timeouts that will cancel the task as
early as possible.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mitigation-of-zero-concurrency-issue">Mitigation of zero concurrency issue<a href="#mitigation-of-zero-concurrency-issue" class="hash-link" aria-label="Direct link to Mitigation of zero concurrency issue" title="Direct link to Mitigation of zero concurrency issue">​</a></h3>
<p>Several new timeouts were added to the task function, which should help mitigate the zero concurrency bug. Namely fetching of next request information and reclaiming failed requests back to the queue
are now executed with a timeout with 3 additional retries before the task fails. The timeout is always at least 300s (5 minutes), or <code>requestHandlerTimeoutSecs</code> if that value is higher.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="full-list-of-changes">Full list of changes<a href="#full-list-of-changes" class="hash-link" aria-label="Direct link to Full list of changes" title="Direct link to Full list of changes">​</a></h3>
<ul>
<li>fix <code>RequestError: URI malformed</code> in cheerio crawler (#1205)</li>
<li>only provide Cookie header if cookies are present (#1218)</li>
<li>handle extra cases for <code>diffCookie</code> (#1217)</li>
<li>add timeout for task function (#1234)</li>
<li>implement proxy per page in browser crawlers (#1228)</li>
<li>add fingerprinting support (#1243)</li>
<li>implement abortable timeouts (#1245)</li>
<li>add timeouts with retries to <code>runTaskFunction()</code> (#1250)</li>
<li>automatically convert google spreadsheet URLs to CSV exports (#1255)</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="210-2021-10-07"><a href="https://github.com/apify/crawlee/compare/v2.0.7...v2.1.0" target="_blank" rel="noopener noreferrer">2.1.0</a> (2021-10-07)<a href="#210-2021-10-07" class="hash-link" aria-label="Direct link to 210-2021-10-07" title="Direct link to 210-2021-10-07">​</a></h2>
<ul>
<li>automatically convert google docs share urls to csv download ones in request list (#1174)</li>
<li>use puppeteer emulating scrolls instead of <code>window.scrollBy</code> (#1170)</li>
<li>warn if apify proxy is used in proxyUrls (#1173)</li>
<li>fix <code>YOUTUBE_REGEX_STRING</code> being too greedy (#1171)</li>
<li>add <code>purgeLocalStorage</code> utility method (#1187)</li>
<li>catch errors inside request interceptors (#1188, #1190)</li>
<li>add support for cgroups v2 (#1177)</li>
<li>fix incorrect offset in <code>fixUrl</code> function (#1184)</li>
<li>support channel and user links in YouTube regex (#1178)</li>
<li>fix: allow passing <code>requestsFromUrl</code> to <code>RequestListOptions</code> in TS (#1191)</li>
<li>allow passing <code>forceCloud</code> down to the KV store (#1186), closes #752</li>
<li>merge cookies from session with user provided ones (#1201), closes #1197</li>
<li>use <code>ApifyClient</code> v2 (full rewrite to TS)</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="207-2021-09-08"><a href="https://github.com/apify/crawlee/compare/v2.0.6...v2.0.7" target="_blank" rel="noopener noreferrer">2.0.7</a> (2021-09-08)<a href="#207-2021-09-08" class="hash-link" aria-label="Direct link to 207-2021-09-08" title="Direct link to 207-2021-09-08">​</a></h2>
<ul>
<li>Fix casting of int/bool environment variables (e.g. <code>APIFY_LOCAL_STORAGE_ENABLE_WAL_MODE</code>), closes #956</li>
<li>Fix incognito pages and user data dir (#1145)</li>
<li>Add <code>@ts-ignore</code> comments to imports of optional peer dependencies (#1152)</li>
<li>Use config instance in <code>sdk.openSessionPool()</code> (#1154)</li>
<li>Add a breaking callback to <code>infiniteScroll</code> (#1140)</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="206-2021-08-27"><a href="https://github.com/apify/crawlee/compare/v2.0.5...v2.0.6" target="_blank" rel="noopener noreferrer">2.0.6</a> (2021-08-27)<a href="#206-2021-08-27" class="hash-link" aria-label="Direct link to 206-2021-08-27" title="Direct link to 206-2021-08-27">​</a></h2>
<ul>
<li>Fix deprecation messages logged from <code>ProxyConfiguration</code> and <code>CheerioCrawler</code>.</li>
<li>Update <code>got-scraping</code> to receive multiple improvements.</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="205-2021-08-24"><a href="https://github.com/apify/crawlee/compare/v2.0.4...v2.0.5" target="_blank" rel="noopener noreferrer">2.0.5</a> (2021-08-24)<a href="#205-2021-08-24" class="hash-link" aria-label="Direct link to 205-2021-08-24" title="Direct link to 205-2021-08-24">​</a></h2>
<ul>
<li>Fix error handling in puppeteer crawler</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="204-2021-08-23"><a href="https://github.com/apify/crawlee/compare/v2.0.3...v2.0.4" target="_blank" rel="noopener noreferrer">2.0.4</a> (2021-08-23)<a href="#204-2021-08-23" class="hash-link" aria-label="Direct link to 204-2021-08-23" title="Direct link to 204-2021-08-23">​</a></h2>
<ul>
<li>Use <code>sessionToken</code> with <code>got-scraping</code></li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="203-2021-08-20"><a href="https://github.com/apify/crawlee/compare/v2.0.2...v2.0.3" target="_blank" rel="noopener noreferrer">2.0.3</a> (2021-08-20)<a href="#203-2021-08-20" class="hash-link" aria-label="Direct link to 203-2021-08-20" title="Direct link to 203-2021-08-20">​</a></h2>
<ul>
<li><strong>BREAKING IN EDGE CASES</strong> * We removed <code>forceUrlEncoding</code> in <code>requestAsBrowser</code> because we found out that recent versions of the underlying HTTP client <code>got</code> already encode URLs
and <code>forceUrlEncoding</code> could lead to weird behavior. We think of this as fixing a bug, so we&#x27;re not bumping the major version.</li>
<li>Limit <code>handleRequestTimeoutMillis</code> to max valid value to prevent Node.js fallback to <code>1</code>.</li>
<li>Use <code>got-scraping@^3.0.1</code></li>
<li>Disable SSL validation on MITM proxie</li>
<li>Limit <code>handleRequestTimeoutMillis</code> to max valid value</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="202-2021-08-12"><a href="https://github.com/apify/crawlee/compare/v2.0.1...v2.0.2" target="_blank" rel="noopener noreferrer">2.0.2</a> (2021-08-12)<a href="#202-2021-08-12" class="hash-link" aria-label="Direct link to 202-2021-08-12" title="Direct link to 202-2021-08-12">​</a></h2>
<ul>
<li>Fix serialization issues in <code>CheerioCrawler</code> caused by parser conflicts in recent versions of <code>cheerio</code>.</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="201-2021-08-06"><a href="https://github.com/apify/crawlee/compare/v2.0.0...v2.0.1" target="_blank" rel="noopener noreferrer">2.0.1</a> (2021-08-06)<a href="#201-2021-08-06" class="hash-link" aria-label="Direct link to 201-2021-08-06" title="Direct link to 201-2021-08-06">​</a></h2>
<ul>
<li>Use <code>got-scraping</code> 2.0.1 until fully compatible.</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="200-2021-08-05"><a href="https://github.com/apify/crawlee/compare/v1.3.4...v2.0.0" target="_blank" rel="noopener noreferrer">2.0.0</a> (2021-08-05)<a href="#200-2021-08-05" class="hash-link" aria-label="Direct link to 200-2021-08-05" title="Direct link to 200-2021-08-05">​</a></h2>
<ul>
<li><strong>BREAKING</strong>: Require Node.js &gt;=15.10.0 because HTTP2 support on lower Node.js versions is very buggy.</li>
<li><strong>BREAKING</strong>: Bump <code>cheerio</code> to <code>1.0.0-rc.10</code> from <code>rc.3</code>. There were breaking changes in <code>cheerio</code> between the versions so this bump might be breaking for you as well.</li>
<li>Remove <code>LiveViewServer</code> which was deprecated before release of SDK v1.</li>
</ul></section></div><footer class="tsd-footer">Powered by<!-- --> <a href="https://github.com/milesj/docusaurus-plugin-typedoc-api">docusaurus-plugin-typedoc-api</a> <!-- -->and <a href="https://typedoc.org/">TypeDoc</a></footer></article></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#371-2024-01-02" class="table-of-contents__link toc-highlight">3.7.1 (2024-01-02)</a><ul><li><a href="#bug-fixes" class="table-of-contents__link toc-highlight">Bug Fixes</a></li><li><a href="#features" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#362-2023-11-26" class="table-of-contents__link toc-highlight">3.6.2 (2023-11-26)</a><ul><li><a href="#bug-fixes-1" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#361-2023-11-15" class="table-of-contents__link toc-highlight">3.6.1 (2023-11-15)</a><ul><li><a href="#bug-fixes-2" class="table-of-contents__link toc-highlight">Bug Fixes</a></li><li><a href="#bug-fixes-3" class="table-of-contents__link toc-highlight">Bug Fixes</a></li><li><a href="#features-1" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#358-2023-10-17" class="table-of-contents__link toc-highlight">3.5.8 (2023-10-17)</a></li><li><a href="#357-2023-10-05" class="table-of-contents__link toc-highlight">3.5.7 (2023-10-05)</a><ul><li><a href="#bug-fixes-4" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#356-2023-10-04" class="table-of-contents__link toc-highlight">3.5.6 (2023-10-04)</a><ul><li><a href="#bug-fixes-5" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#355-2023-10-02" class="table-of-contents__link toc-highlight">3.5.5 (2023-10-02)</a><ul><li><a href="#bug-fixes-6" class="table-of-contents__link toc-highlight">Bug Fixes</a></li><li><a href="#features-2" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#354-2023-09-11" class="table-of-contents__link toc-highlight">3.5.4 (2023-09-11)</a><ul><li><a href="#bug-fixes-7" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#353-2023-08-31" class="table-of-contents__link toc-highlight">3.5.3 (2023-08-31)</a><ul><li><a href="#bug-fixes-8" class="table-of-contents__link toc-highlight">Bug Fixes</a></li><li><a href="#features-3" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#352-2023-08-21" class="table-of-contents__link toc-highlight">3.5.2 (2023-08-21)</a><ul><li><a href="#bug-fixes-9" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#351-2023-08-16" class="table-of-contents__link toc-highlight">3.5.1 (2023-08-16)</a><ul><li><a href="#bug-fixes-10" class="table-of-contents__link toc-highlight">Bug Fixes</a></li><li><a href="#bug-fixes-11" class="table-of-contents__link toc-highlight">Bug Fixes</a></li><li><a href="#features-4" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#342-2023-07-19" class="table-of-contents__link toc-highlight">3.4.2 (2023-07-19)</a><ul><li><a href="#features-5" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#341-2023-07-13" class="table-of-contents__link toc-highlight">3.4.1 (2023-07-13)</a><ul><li><a href="#bug-fixes-12" class="table-of-contents__link toc-highlight">Bug Fixes</a></li><li><a href="#features-6" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#333-2023-05-31" class="table-of-contents__link toc-highlight">3.3.3 (2023-05-31)</a><ul><li><a href="#features-7" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#332-2023-05-11" class="table-of-contents__link toc-highlight">3.3.2 (2023-05-11)</a><ul><li><a href="#bug-fixes-13" class="table-of-contents__link toc-highlight">Bug Fixes</a></li><li><a href="#features-8" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#331-2023-04-11" class="table-of-contents__link toc-highlight">3.3.1 (2023-04-11)</a><ul><li><a href="#bug-fixes-14" class="table-of-contents__link toc-highlight">Bug Fixes</a></li><li><a href="#bug-fixes-15" class="table-of-contents__link toc-highlight">Bug Fixes</a></li><li><a href="#features-9" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#322-2023-02-08" class="table-of-contents__link toc-highlight">3.2.2 (2023-02-08)</a></li><li><a href="#321-2023-02-07" class="table-of-contents__link toc-highlight">3.2.1 (2023-02-07)</a><ul><li><a href="#bug-fixes-16" class="table-of-contents__link toc-highlight">Bug Fixes</a></li><li><a href="#bug-fixes-17" class="table-of-contents__link toc-highlight">Bug Fixes</a></li><li><a href="#features-10" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#313-2022-12-07" class="table-of-contents__link toc-highlight">3.1.3 (2022-12-07)</a></li><li><a href="#312-2022-11-15" class="table-of-contents__link toc-highlight">3.1.2 (2022-11-15)</a><ul><li><a href="#bug-fixes-18" class="table-of-contents__link toc-highlight">Bug Fixes</a></li><li><a href="#features-11" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#311-2022-11-07" class="table-of-contents__link toc-highlight">3.1.1 (2022-11-07)</a><ul><li><a href="#bug-fixes-19" class="table-of-contents__link toc-highlight">Bug Fixes</a></li><li><a href="#features-12" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-20" class="table-of-contents__link toc-highlight">Bug Fixes</a></li><li><a href="#features-13" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#304-2022-08-22" class="table-of-contents__link toc-highlight">3.0.4 (2022-08-22)</a><ul><li><a href="#features-14" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-21" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#303-2022-08-11" class="table-of-contents__link toc-highlight">3.0.3 (2022-08-11)</a><ul><li><a href="#fixes" class="table-of-contents__link toc-highlight">Fixes</a></li><li><a href="#features-15" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#302-2022-07-28" class="table-of-contents__link toc-highlight">3.0.2 (2022-07-28)</a><ul><li><a href="#fixes-1" class="table-of-contents__link toc-highlight">Fixes</a></li><li><a href="#features-16" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#301-2022-07-26" class="table-of-contents__link toc-highlight">3.0.1 (2022-07-26)</a><ul><li><a href="#fixes-2" class="table-of-contents__link toc-highlight">Fixes</a></li><li><a href="#features-17" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#300-2022-07-13" class="table-of-contents__link toc-highlight">3.0.0 (2022-07-13)</a><ul><li><a href="#crawlee-vs-apify-sdk" class="table-of-contents__link toc-highlight">Crawlee vs Apify SDK</a><ul><li><a href="#installing-crawlee" class="table-of-contents__link toc-highlight">Installing Crawlee</a></li></ul></li><li><a href="#full-typescript-support" class="table-of-contents__link toc-highlight">Full TypeScript support</a><ul><li><a href="#docker-build" class="table-of-contents__link toc-highlight">Docker build</a></li></ul></li><li><a href="#browser-fingerprints" class="table-of-contents__link toc-highlight">Browser fingerprints</a></li><li><a href="#session-cookie-method-renames" class="table-of-contents__link toc-highlight">Session cookie method renames</a></li><li><a href="#memory-storage" class="table-of-contents__link toc-highlight">Memory storage</a></li><li><a href="#purging-of-the-default-storage" class="table-of-contents__link toc-highlight">Purging of the default storage</a></li><li><a href="#renamed-crawler-options-and-interfaces" class="table-of-contents__link toc-highlight">Renamed crawler options and interfaces</a></li><li><a href="#context-aware-helpers" class="table-of-contents__link toc-highlight">Context aware helpers</a><ul><li><a href="#enqueuing-links" class="table-of-contents__link toc-highlight">Enqueuing links</a></li></ul></li><li><a href="#implicit-requestqueue-instance" class="table-of-contents__link toc-highlight">Implicit <code>RequestQueue</code> instance</a></li><li><a href="#crawleraddrequests" class="table-of-contents__link toc-highlight"><code>crawler.addRequests()</code></a></li><li><a href="#less-verbose-error-logging" class="table-of-contents__link toc-highlight">Less verbose error logging</a></li><li><a href="#removal-of-requestasbrowser" class="table-of-contents__link toc-highlight">Removal of <code>requestAsBrowser</code></a><ul><li><a href="#how-to-use-sendrequest" class="table-of-contents__link toc-highlight">How to use <code>sendRequest()</code>?</a></li><li><a href="#removed-options" class="table-of-contents__link toc-highlight">Removed options</a></li><li><a href="#renamed-options" class="table-of-contents__link toc-highlight">Renamed options</a><ul><li><a href="#payload" class="table-of-contents__link toc-highlight"><code>payload</code></a></li><li><a href="#ignoresslerrors" class="table-of-contents__link toc-highlight"><code>ignoreSslErrors</code></a></li><li><a href="#header-generator-options" class="table-of-contents__link toc-highlight"><code>header-generator</code> options</a></li><li><a href="#timeoutsecs" class="table-of-contents__link toc-highlight"><code>timeoutSecs</code></a></li><li><a href="#throwonhttperrors" class="table-of-contents__link toc-highlight"><code>throwOnHttpErrors</code></a></li><li><a href="#decodebody" class="table-of-contents__link toc-highlight"><code>decodeBody</code></a></li><li><a href="#abortfunction" class="table-of-contents__link toc-highlight"><code>abortFunction</code></a></li></ul></li></ul></li><li><a href="#removal-of-browser-pool-plugin-mixing" class="table-of-contents__link toc-highlight">Removal of browser pool plugin mixing</a></li><li><a href="#handling-requests-outside-of-browser" class="table-of-contents__link toc-highlight">Handling requests outside of browser</a></li><li><a href="#logging" class="table-of-contents__link toc-highlight">Logging</a></li><li><a href="#auto-saved-crawler-state" class="table-of-contents__link toc-highlight">Auto-saved crawler state</a></li><li><a href="#apify-sdk" class="table-of-contents__link toc-highlight">Apify SDK</a><ul><li><a href="#events" class="table-of-contents__link toc-highlight">Events</a></li></ul></li><li><a href="#smallerinternal-breaking-changes" class="table-of-contents__link toc-highlight">Smaller/internal breaking changes</a></li></ul></li><li><a href="#232-2022-05-05" class="table-of-contents__link toc-highlight">2.3.2 (2022-05-05)</a></li><li><a href="#231-2022-05-03" class="table-of-contents__link toc-highlight">2.3.1 (2022-05-03)</a></li><li><a href="#230-2022-04-07" class="table-of-contents__link toc-highlight">2.3.0 (2022-04-07)</a><ul><li><a href="#0-concurrency-mitigation" class="table-of-contents__link toc-highlight">0 concurrency mitigation</a></li></ul></li><li><a href="#222-2022-02-14" class="table-of-contents__link toc-highlight">2.2.2 (2022-02-14)</a></li><li><a href="#221-2022-01-03" class="table-of-contents__link toc-highlight">2.2.1 (2022-01-03)</a></li><li><a href="#220-2021-12-17" class="table-of-contents__link toc-highlight">2.2.0 (2021-12-17)</a><ul><li><a href="#proxy-per-page" class="table-of-contents__link toc-highlight">Proxy per page</a></li><li><a href="#abortable-timeouts" class="table-of-contents__link toc-highlight">Abortable timeouts</a></li><li><a href="#mitigation-of-zero-concurrency-issue" class="table-of-contents__link toc-highlight">Mitigation of zero concurrency issue</a></li><li><a href="#full-list-of-changes" class="table-of-contents__link toc-highlight">Full list of changes</a></li></ul></li><li><a href="#210-2021-10-07" class="table-of-contents__link toc-highlight">2.1.0 (2021-10-07)</a></li><li><a href="#207-2021-09-08" class="table-of-contents__link toc-highlight">2.0.7 (2021-09-08)</a></li><li><a href="#206-2021-08-27" class="table-of-contents__link toc-highlight">2.0.6 (2021-08-27)</a></li><li><a href="#205-2021-08-24" class="table-of-contents__link toc-highlight">2.0.5 (2021-08-24)</a></li><li><a href="#204-2021-08-23" class="table-of-contents__link toc-highlight">2.0.4 (2021-08-23)</a></li><li><a href="#203-2021-08-20" class="table-of-contents__link toc-highlight">2.0.3 (2021-08-20)</a></li><li><a href="#202-2021-08-12" class="table-of-contents__link toc-highlight">2.0.2 (2021-08-12)</a></li><li><a href="#201-2021-08-06" class="table-of-contents__link toc-highlight">2.0.1 (2021-08-06)</a></li><li><a href="#200-2021-08-05" class="table-of-contents__link toc-highlight">2.0.0 (2021-08-05)</a></li></ul></div></div></div></div></main></div></div></div></div><footer class="footer_J6tW light"><div class="container padding-horiz--lg"><div class="row"><div class="col col--5"><div class="row"><div class="col col--6"><div class="footerTitle_tbhc">Docs</div><ul class="clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/guides">Guides</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/examples">Examples</a></li><li class="footer__item"><a class="footer__link-item" href="/api/core">API reference</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/upgrading/upgrading-to-v3">Upgrading to v3</a></li></ul></div><div class="col col--6"><div class="footerTitle_tbhc">Community</div><ul class="clean-list"><li class="footer__item"><a href="https://discord.com/invite/jyEM2PRvMU" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/crawlee" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/apify" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div><div class="col col--7"><div class="row"><div class="col col--3 col--offset-9"><div class="footerTitle_tbhc">More</div><ul class="clean-list"><li class="footer__item"><a href="https://apify.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Apify Platform<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docusaurus.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/apify/crawlee" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></div><div class="row padding-vert--md padding-top--lg"><div class="col padding-vert--md col--6"><div class="freeAndOpenSource_V9mY"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="alignMiddle_ZeUO"><path d="m23.85 21.426-1.78-2.91a.48.48 0 0 1-.07-.26v-4.13c0-1.78-1.71-3.07-3.52-4.45a.511.511 0 0 1-.2-.36.53.53 0 0 1 .14-.4 4.93 4.93 0 0 0 1.07-5.88 5.08 5.08 0 0 0-8.08-1.29l-1.06 1a.48.48 0 0 1-.67 0l-1.06-1a5.09 5.09 0 0 0-8.09 1.29 5 5 0 0 0 1 5.76l7.76 8a1.059 1.059 0 0 0 .77.32 1.08 1.08 0 0 0 .78-.32.64.64 0 0 0 .14-.66 3.79 3.79 0 0 1-.2-1.38 3.749 3.749 0 0 1 4.92-3.37.49.49 0 0 0 .51-.13l.15-.15a.5.5 0 0 1 .66-.05l.3.23c1.22.92 2.73 2.07 2.73 2.85v4.55a1 1 0 0 0 .15.53l2 3.26a1 1 0 1 0 1.7-1l-.05-.05Z" fill="#B3B8D2"></path><path d="M16.09 13.196a2.37 2.37 0 0 0-3.19 0 2.38 2.38 0 0 0-.18 3.39l1.63 1.77a.55.55 0 0 1 .13.34v1c0 1.3 1.52 2.59 2 2.95a.91.91 0 0 0 .54.19.88.88 0 0 0 .54-1.57 3.889 3.889 0 0 1-1.31-1.57v-1.57a.86.86 0 0 0-.23-.59l-2-2.18a.58.58 0 0 1-.17-.45.66.66 0 0 1 .21-.44.64.64 0 0 1 .85 0l2 1.86a.874.874 0 1 0 1.19-1.28l-2.01-1.85Z" fill="#B3B8D2"></path></svg><span class="alignMiddle_ZeUO">Crawlee is free and open source</span></div></div><div class="col padding-vert--md col--6 text--right"><span class="builtBy_TvsZ"><span class="alignMiddle_ZeUO">Built by</span><a href="https://apify.com"><svg width="91" height="25" viewBox="0 0 91 25" fill="none" xmlns="http://www.w3.org/2000/svg" class="alignMiddle_ZeUO"><path d="M3.135 2.85A3.409 3.409 0 0 0 .227 6.699l2.016 14.398 8.483-19.304-7.59 1.059Z" fill="#97D700"></path><path d="M23.604 14.847 22.811 3.78a3.414 3.414 0 0 0-3.64-3.154c-.077 0-.153.014-.228.025l-3.274.452 7.192 16.124c.54-.67.805-1.52.743-2.379Z" fill="#71C5E8"></path><path d="M5.336 24.595c.58.066 1.169-.02 1.706-.248l12.35-5.211L13.514 5.97 5.336 24.595Z" fill="#FF9013"></path><path d="M33.83 5.304h3.903l5.448 14.623h-3.494l-1.022-2.994h-5.877l-1.025 2.994h-3.384L33.83 5.304Zm-.177 9.032h4.14l-2-5.994h-.086l-2.054 5.994ZM58.842 5.304h3.302v14.623h-3.302V5.304ZM64.634 5.304h10.71v2.7h-7.4v4.101h5.962v2.632h-5.963v5.186h-3.309V5.303ZM82.116 14.38l-5.498-9.076h3.748l3.428 6.016h.085l3.599-6.016H91l-5.56 9.054v5.569h-3.324v-5.548ZM51.75 5.304h-7.292v14.623h3.3v-4.634h3.993a4.995 4.995 0 1 0 0-9.99Zm-.364 7.417h-3.628V7.875h3.627a2.423 2.423 0 0 1 0 4.846Z" fill="#fff"></path></svg></a></span></div></div></div></footer></div>
<!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P7MCS7" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) --></body>
</html>